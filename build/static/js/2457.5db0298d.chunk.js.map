{"version":3,"file":"static/js/2457.5db0298d.chunk.js","mappings":"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","sources":["helpers/useQueryParams.js","views/products/product-clone.js"],"sourcesContent":["import { useNavigate, useLocation } from 'react-router-dom';\nimport qs from 'qs';\n\nexport const useQueryParams = () => {\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const queryParams = qs.parse(location.search, { ignoreQueryPrefix: true });\n\n  const get = (name) => queryParams[name];\n  const set = (name, value) =>\n    navigate({ search: qs.stringify({ ...queryParams, [name]: value }) });\n  const clear = () => navigate({ search: qs.stringify({}) });\n  const merge = (values) =>\n    navigate({ search: qs.stringify({ ...queryParams, ...values }) });\n  const reset = (name) => {\n    const newParams = { ...queryParams };\n    if (newParams[name]) {\n      delete newParams[name];\n    }\n\n    navigate({ search: qs.stringify({ ...newParams }) });\n  };\n\n  const setMultiple = (params) => {\n    const newParams = { ...queryParams, ...params };\n    navigate({ search: qs.stringify(newParams) });\n  };\n\n  const resetMultiple = (params) => {\n    const newParams = { ...queryParams };\n    params.forEach((param) => {\n      if (newParams[param]) {\n        delete newParams[param];\n      }\n    });\n    navigate({ search: qs.stringify(newParams) });\n  };\n\n  return {\n    values: queryParams,\n    set,\n    reset,\n    clear,\n    merge,\n    get,\n    setMultiple,\n    resetMultiple,\n  };\n};\n","import React, { useEffect, useState } from 'react';\nimport { Card, Spin, Steps } from 'antd';\nimport LanguageList from 'components/language-list';\nimport { useParams } from 'react-router-dom';\nimport productService from 'services/product';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { disableRefetch, setMenuData } from 'redux/slices/menu';\nimport { useTranslation } from 'react-i18next';\nimport { useQueryParams } from 'helpers/useQueryParams';\nimport useDidUpdate from 'helpers/useDidUpdate';\nimport ProductStock from 'components/forms/product/stock';\nimport { steps } from './steps';\nimport ProductFinish from './product-finish';\nimport ProductExtras from './product-extras';\nimport ProductsIndex from './products-index';\nimport ProductProperty from './property';\n\nconst { Step } = Steps;\n\nconst ProductsClone = () => {\n  const { t } = useTranslation();\n  const { uuid } = useParams();\n  const queryParams = useQueryParams();\n  const dispatch = useDispatch();\n\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const { languages } = useSelector((state) => state.formLang, shallowEqual);\n\n  const [loading, setLoading] = useState(activeMenu.refetch);\n\n  const current = Number(queryParams.values?.step || 0);\n\n  useEffect(() => {\n    fetchProduct(uuid);\n    // eslint-disable-next-line\n  }, []);\n\n  useDidUpdate(() => {\n    if (activeMenu.refetch) {\n      fetchProduct(uuid);\n    }\n    // eslint-disable-next-line\n  }, [activeMenu.refetch]);\n\n  const next = () => {\n    const step = current + 1;\n    queryParams.set('step', step);\n  };\n  const prev = () => {\n    const step = current - 1;\n    queryParams.set('step', step);\n  };\n\n  const createImages = (items) =>\n    items.map((item) => ({\n      uid: item.id,\n      name: item.path,\n      url: item.path,\n    }));\n\n  const createSelectObject = (item) => {\n    if (!item) return null;\n    return {\n      label: item.translation ? item.translation.title : item.title,\n      value: item.id,\n    };\n  };\n\n  const fetchProduct = (uuid) => {\n    setLoading(true);\n    productService\n      .getById(uuid)\n      .then((res) => {\n        const extras = {};\n        res?.data?.stocks?.forEach((stock) => {\n          stock?.extras?.forEach((extra) => {\n            if (extra?.extra_group_id in extras) {\n              if (\n                !extras?.[extra?.extra_group_id]?.values?.some(\n                  (item) => item?.value === extra?.id,\n                )\n              ) {\n                extras?.[extra?.extra_group_id]?.values?.push({\n                  value: extra?.id,\n                  label: extra?.value,\n                  stock_id: stock?.id,\n                });\n              }\n            } else {\n              extras[extra?.extra_group_id] = {\n                label: extra?.group.translation?.title,\n                value: extra?.extra_group_id,\n                id: extra?.extra_group_id,\n                stock_id: stock?.id,\n                values: [\n                  {\n                    value: extra?.id,\n                    label: extra?.value,\n                    stock_id: stock?.id,\n                  },\n                ],\n              };\n            }\n          });\n        });\n        const data = {\n          ...res.data,\n          ...getLanguageFields(res?.data),\n          shop: createSelectObject(res?.data?.shop),\n          category: createSelectObject(res?.data?.category),\n          kitchen: createSelectObject(res?.data?.kitchen),\n          brand: createSelectObject(res?.data?.brand),\n          unit: createSelectObject(res?.data?.unit),\n          images: createImages(res?.data?.galleries),\n          extras: Object.values(extras),\n          stocks: res?.data?.stocks?.map((stock) => ({\n            ...stock,\n            ...Object.assign(\n              {},\n              ...stock?.extras?.map((extra, idx) => ({\n                [`extras[${idx}]`]: extra.id,\n              })),\n            ),\n            quantity: stock?.quantity || 0,\n            price: stock?.price || 0,\n            extras: undefined,\n          })),\n          properties: res?.data?.properties,\n          translation: undefined,\n          translations: undefined,\n        };\n        dispatch(setMenuData({ activeMenu, data }));\n      })\n      .finally(() => {\n        setLoading(false);\n        dispatch(disableRefetch(activeMenu));\n      });\n  };\n\n  const getLanguageFields = (data) => {\n    if (!data?.translations) {\n      return {};\n    }\n    const { translations } = data;\n    const result = languages.map((item) => ({\n      [`title[${item.locale}]`]: translations.find(\n        (el) => el.locale === item.locale,\n      )?.title,\n      [`description[${item.locale}]`]: translations.find(\n        (el) => el.locale === item.locale,\n      )?.description,\n    }));\n    return Object.assign({}, ...result);\n  };\n\n  const onChange = (step) => {\n    dispatch(setMenuData({ activeMenu, data: { ...activeMenu.data, step } }));\n    queryParams.set('step', step);\n  };\n\n  return (\n    <>\n      <Card title={t('clone.product')} extra={<LanguageList />}>\n        <Steps current={current} onChange={onChange}>\n          {steps.map((item) => (\n            <Step title={t(item.title)} key={item.title} />\n          ))}\n        </Steps>\n      </Card>\n\n      {!loading ? (\n        <div>\n          {steps[current].content === 'First-content' && (\n            <ProductsIndex next={next} />\n          )}\n\n          {steps[current].content === 'Second-content' && (\n            <ProductExtras next={next} prev={prev} />\n          )}\n\n          {steps[current].content === 'Third-content' && (\n            <ProductStock next={next} prev={prev} />\n          )}\n\n          {steps[current].content === 'Fourth-content' && (\n            <ProductProperty next={next} prev={prev} />\n          )}\n\n          {steps[current].content === 'Finish-content' && (\n            <ProductFinish prev={prev} />\n          )}\n        </div>\n      ) : (\n        <div className='d-flex justify-content-center align-items-center'>\n          <Spin size='large' className='py-5' />\n        </div>\n      )}\n    </>\n  );\n};\nexport default ProductsClone;\n"],"names":["useQueryParams","navigate","useNavigate","location","useLocation","queryParams","qs","search","ignoreQueryPrefix","values","set","name","value","reset","newParams","clear","merge","get","setMultiple","params","resetMultiple","forEach","param","Step","Steps","ProductsClone","_queryParams$values","t","useTranslation","uuid","useParams","dispatch","useDispatch","activeMenu","useSelector","state","menu","shallowEqual","languages","formLang","loading","setLoading","useState","refetch","current","Number","step","useEffect","fetchProduct","useDidUpdate","next","prev","createSelectObject","item","label","translation","title","id","productService","then","res","_res$data","_res$data$stocks","_res$data2","_res$data3","_res$data4","_res$data5","_res$data6","_res$data7","_res$data8","_res$data8$stocks","_res$data9","extras","data","stocks","stock","_stock$extras","extra","_extras$extra$extra_g","_extras$extra$extra_g2","_extras$extra$extra_g3","_extras$extra$extra_g4","_extra$group$translat","extra_group_id","some","push","stock_id","group","getLanguageFields","shop","category","kitchen","brand","unit","images","items","galleries","map","uid","path","url","Object","_stock$extras2","assign","idx","quantity","price","undefined","properties","translations","setMenuData","finally","disableRefetch","result","_translations$find","_translations$find2","locale","find","el","description","_jsxs","_Fragment","children","_jsx","Card","LanguageList","onChange","steps","className","Spin","size","content","ProductsIndex","ProductExtras","ProductStock","ProductProperty","ProductFinish"],"sourceRoot":""}