(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[5163],{27081:(e,s,a)=>{"use strict";a.d(s,{K:()=>r});var l=a(16871),t=a(32808),n=a.n(t);const r=()=>{const e=(0,l.s0)(),s=(0,l.TH)(),a=n().parse(s.search,{ignoreQueryPrefix:!0});return{values:a,set:(s,l)=>e({search:n().stringify({...a,[s]:l})}),reset:s=>{const l={...a};l[s]&&delete l[s],e({search:n().stringify({...l})})},clear:()=>e({search:n().stringify({})}),merge:s=>e({search:n().stringify({...a,...s})}),get:e=>a[e],setMultiple:s=>{const l={...a,...s};e({search:n().stringify(l)})},resetMultiple:s=>{const l={...a};s.forEach((e=>{l[e]&&delete l[e]})),e({search:n().stringify(l)})}}}},93669:(e,s,a)=>{"use strict";a.d(s,{Z:()=>H});var l=a(72791),t=a(77483),n=a(83099),r=a(87309),i=a(16871),d=a(66106),o=a(30914),u=a(54080),c=a(86005),m=a(25581),h=a(38243),p=a(91333),g=a(66818),x=a(49355),Z=a(28748),v=a(79337),j=a(33168),f=a(15764),y=a(58998),b=a(95568),_=a(85830),w=a(80184);function q(e){let{setLocation:s,form:a,item:l,idx:n,defaultLang:r}=e;const{t:i}=(0,j.$)(),{google_map_key:d}=(0,v.v9)((e=>e.globalSettings.settings),v.wU),{ref:o}=(0,b.usePlacesWidget)({apiKey:d||_.kr,onPlaceSelected:e=>{const l={lat:null===e||void 0===e?void 0:e.geometry.location.lat(),lng:null===e||void 0===e?void 0:e.geometry.location.lng()};s(l),a.setFieldsValue({[`address[${r}]`]:null===e||void 0===e?void 0:e.formatted_address})}});return(0,w.jsx)(t.Z.Item,{label:i("address"),name:`address[${null===l||void 0===l?void 0:l.locale}]`,rules:[{required:(null===l||void 0===l?void 0:l.locale)===r,message:i("required")}],hidden:(null===l||void 0===l?void 0:l.locale)!==r,children:(0,w.jsx)("input",{className:"address-input",ref:o,placeholder:""})},"address"+n)}var I=a(11918),k=a(68961),S=a(71550),F=a(72568),N=a(35740),L=a(24455);const $=e=>{let{logoImage:s,setLogoImage:a,backImage:n,setBackImage:i,form:b,location:_,setLocation:$,user:M}=e;const{t:P}=(0,j.$)(),[C,H]=(0,l.useState)(null),[O,V]=(0,l.useState)(null),[D,U]=(0,l.useState)(null),{defaultLang:Y,languages:A}=(0,v.v9)((e=>e.formLang),v.wU);const B=()=>{H(!0),U(!0)},R=()=>{V(!0),U(!0)},T=()=>{H(!1),V(!1)};return(0,w.jsxs)(d.Z,{gutter:12,children:[(0,w.jsx)(o.Z,{span:24,children:(0,w.jsx)(u.Z,{children:(0,w.jsxs)(d.Z,{gutter:12,children:[(0,w.jsx)(o.Z,{span:4,children:(0,w.jsx)(t.Z.Item,{label:P("logo.image"),children:(0,w.jsx)(I.Z,{type:"shops/logo",imageList:s,setImageList:a,form:b,multiple:!1,name:"logo_img"})})}),(0,w.jsx)(o.Z,{span:4,children:(0,w.jsx)(t.Z.Item,{label:P("background.image"),children:(0,w.jsx)(I.Z,{type:"shops/background",imageList:n,setImageList:i,form:b,multiple:!1,name:"background_img"})})}),(0,w.jsx)(o.Z,{span:10,children:(0,w.jsx)(t.Z.Item,{label:P("status.note"),name:"status_note",children:(0,w.jsx)(x.Z,{rows:4})})}),(0,w.jsx)(o.Z,{span:4,children:(0,w.jsx)(t.Z.Item,{name:"status",label:P("status"),children:(0,w.jsx)(c.Z,{disabled:!0})})}),(0,w.jsx)(o.Z,{span:2,children:(0,w.jsx)(t.Z.Item,{label:P("open"),name:"open",valuePropName:"checked",children:(0,w.jsx)(m.Z,{disabled:!0})})})]})})}),(0,w.jsx)(o.Z,{span:24,children:(0,w.jsx)(u.Z,{title:P("general"),children:(0,w.jsxs)(d.Z,{gutter:12,children:[(0,w.jsx)(o.Z,{span:12,children:(0,w.jsxs)(d.Z,{gutter:12,children:[(0,w.jsx)(o.Z,{span:24,children:A.map(((e,s)=>(0,w.jsx)(t.Z.Item,{label:P("title"),name:`title[${e.locale}]`,rules:[{required:e.locale===Y,message:P("required")},{min:2,message:P("title.required")}],hidden:e.locale!==Y,children:(0,w.jsx)(c.Z,{})},"title"+s)))}),(0,w.jsx)(o.Z,{span:24,children:(0,w.jsx)(t.Z.Item,{label:P("phone"),name:"phone",rules:[{required:!0,message:P("required")}],children:(0,w.jsx)(h.Z,{min:0,className:"w-100"})})})]})}),(0,w.jsx)(o.Z,{span:12,children:A.map(((e,s)=>(0,w.jsx)(t.Z.Item,{label:P("description"),name:`description[${e.locale}]`,rules:[{required:e.locale===Y,message:P("required")},{min:3,message:P("required")}],hidden:e.locale!==Y,children:(0,w.jsx)(x.Z,{rows:4})},"desc"+s)))}),(0,w.jsx)(o.Z,{span:8,children:(0,w.jsx)(t.Z.Item,{label:P("restaurant.tags"),name:"tags",rules:[{required:!1,message:P("required")}],children:(0,w.jsx)(N.R,{mode:"multiple",fetchOptions:async function(e){U(!1);const s={search:e};return L.Z.getAll(s).then((e=>{let{data:s}=e;return s.map((e=>{var s;return{label:(null===(s=e.translation)||void 0===s?void 0:s.title)||"no name",value:e.id}}))}))},refetch:D})})}),(0,w.jsx)(o.Z,{span:8,children:(0,w.jsx)(t.Z.Item,{label:P("seller"),name:"user",rules:[{required:!0,message:P("required")}],children:(0,w.jsx)(N.R,{disabled:M,fetchOptions:async function(e){const s={search:e,roles:"user","empty-shop":1};return U(!1),Z.Z.search(s).then((e=>e.data.map((e=>({label:e.firstname+" "+(e.lastname?e.lastname:""),value:e.id})))))},refetch:D,dropdownRender:e=>(0,w.jsxs)(w.Fragment,{children:[e,(0,w.jsx)(p.Z,{style:{margin:"8px 0"}}),(0,w.jsx)(r.Z,{className:"w-100",disabled:M,icon:(0,w.jsx)(k.Z,{}),onClick:B,children:P("add.user")})]})})})}),(0,w.jsx)(o.Z,{span:8,children:(0,w.jsx)(t.Z.Item,{label:P("categories"),name:"categories",rules:[{required:!0,message:P("required")}],children:(0,w.jsx)(N.R,{mode:"multiple",fetchOptions:async function(e){const s={search:e,type:"shop"};return U(!1),f.Z.getAll(s).then((e=>{let{data:s}=e;return s.map((e=>{var s;return{label:(null===(s=e.translation)||void 0===s?void 0:s.title)||"no name",value:e.id}}))}))},refetch:D,dropdownRender:e=>(0,w.jsxs)(w.Fragment,{children:[e,(0,w.jsx)(p.Z,{style:{margin:"8px 0"}}),(0,w.jsx)(r.Z,{className:"w-100",icon:(0,w.jsx)(k.Z,{}),onClick:R,children:P("add.category")})]})})})})]})})}),(0,w.jsx)(o.Z,{span:8,children:(0,w.jsx)(u.Z,{title:P("delivery"),children:(0,w.jsxs)(d.Z,{gutter:8,children:[(0,w.jsx)(o.Z,{span:12,children:(0,w.jsx)(t.Z.Item,{name:"price",label:P("min.price"),rules:[{required:!0,message:P("required")}],children:(0,w.jsx)(h.Z,{className:"w-100"})})}),(0,w.jsx)(o.Z,{span:12,children:(0,w.jsx)(t.Z.Item,{name:"price_per_km",label:P("price.per.km"),rules:[{required:!0,message:P("required")}],children:(0,w.jsx)(h.Z,{className:"w-100"})})})]})})}),(0,w.jsx)(o.Z,{span:8,children:(0,w.jsx)(u.Z,{title:P("delivery.time"),children:(0,w.jsxs)(d.Z,{gutter:12,children:[(0,w.jsx)(o.Z,{span:12,children:(0,w.jsx)(t.Z.Item,{name:"delivery_time_type",label:P("delivery_time_type"),rules:[{required:!0,message:P("required")}],children:(0,w.jsxs)(g.Z,{className:"w-100",children:[(0,w.jsx)(g.Z.Option,{value:"minute",label:P("minutes")}),(0,w.jsx)(g.Z.Option,{value:"hour",label:P("hour")})]})})}),(0,w.jsx)(o.Z,{span:12,children:(0,w.jsx)(t.Z.Item,{name:"delivery_time_from",label:P("delivery_time_from"),rules:[{required:!0,message:P("required")}],children:(0,w.jsx)(h.Z,{className:"w-100"})})}),(0,w.jsx)(o.Z,{span:12,children:(0,w.jsx)(t.Z.Item,{name:"delivery_time_to",label:P("delivery_time_to"),rules:[{required:!0,message:P("required")}],children:(0,w.jsx)(h.Z,{className:"w-100"})})})]})})}),(0,w.jsx)(o.Z,{span:8,children:(0,w.jsx)(u.Z,{title:P("order.info"),children:(0,w.jsxs)(d.Z,{gutter:12,children:[(0,w.jsx)(o.Z,{span:12,children:(0,w.jsx)(t.Z.Item,{label:P("min.amount"),name:"min_amount",rules:[{required:!0,message:P("required")}],children:(0,w.jsx)(h.Z,{min:0,className:"w-100"})})}),(0,w.jsx)(o.Z,{span:12,children:(0,w.jsx)(t.Z.Item,{label:P("tax"),name:"tax",rules:[{required:!0,message:P("required")}],children:(0,w.jsx)(h.Z,{min:0,addonAfter:"%",className:"w-100"})})}),(0,w.jsx)(o.Z,{span:12,children:(0,w.jsx)(t.Z.Item,{label:P("admin.comission"),name:"percentage",rules:[{required:!0,message:P("required")}],children:(0,w.jsx)(h.Z,{min:0,className:"w-100",addonAfter:"%"})})})]})})}),(0,w.jsx)(o.Z,{span:24,children:(0,w.jsx)(u.Z,{title:P("address"),children:(0,w.jsxs)(d.Z,{gutter:12,children:[(0,w.jsx)(o.Z,{span:12,children:A.map(((e,s)=>(0,w.jsx)(q,{setLocation:$,form:b,item:e,idx:s,defaultLang:Y},s)))}),(0,w.jsx)(o.Z,{span:24,children:(0,w.jsx)(y.Z,{location:_,setLocation:$,setAddress:e=>b.setFieldsValue({[`address[${Y}]`]:e})})})]})})}),C&&(0,w.jsx)(S.Z,{visible:C,handleCancel:()=>T()}),O&&(0,w.jsx)(F.Z,{visible:O,handleCancel:()=>T()})]})};var M=a(48030),P=a(4577),C=a(51720);const H=e=>{var s,a,d,o,u,c,m,h,p;let{next:g,action_type:x="",user:Z}=e;const{t:f}=(0,j.$)(),[y]=t.Z.useForm(),b=(0,i.s0)(),_=(0,v.I0)(),{uuid:q}=(0,i.UO)(),{activeMenu:I}=(0,v.v9)((e=>e.menu),v.wU),[k,S]=(0,l.useState)(!1),[F,N]=(0,l.useState)(null!==(s=I.data)&&void 0!==s&&s.logo_img?[null===(a=I.data)||void 0===a?void 0:a.logo_img]:[]),[L,H]=(0,l.useState)(null!==(d=I.data)&&void 0!==d&&d.background_img?[null===(o=I.data)||void 0===o?void 0:o.background_img]:[]),{settings:O}=(0,v.v9)((e=>e.globalSettings),v.wU),[V,D]=(0,l.useState)(null!==I&&void 0!==I&&null!==(u=I.data)&&void 0!==u&&u.location?{lat:parseFloat(null===I||void 0===I||null===(c=I.data)||void 0===c||null===(m=c.location)||void 0===m?void 0:m.latitude),lng:parseFloat(null===I||void 0===I||null===(h=I.data)||void 0===h||null===(p=h.location)||void 0===p?void 0:p.longitude)}:(0,C.Z)(O));(0,l.useEffect)((()=>()=>{const e=y.getFieldsValue(!0);e.open_time=JSON.stringify(null===e||void 0===e?void 0:e.open_time),e.close_time=JSON.stringify(null===e||void 0===e?void 0:e.close_time),_((0,M.nc)({activeMenu:I,data:{...I.data,...e}}))}),[]);return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(t.Z,{form:y,name:"basic",layout:"vertical",onFinish:e=>{var s,a,l;S(!0);const t={...e,"images[0]":null===(s=F[0])||void 0===s?void 0:s.name,"images[1]":null===(a=L[0])||void 0===a?void 0:a.name,delivery_time_type:e.delivery_time_type,delivery_time_to:e.delivery_time_to,delivery_time_from:e.delivery_time_from,categories:e.categories.map((e=>e.value)),tags:null===e||void 0===e||null===(l=e.tags)||void 0===l?void 0:l.map((e=>e.value)),user_id:e.user.value,open:void 0,"location[latitude]":V.lat,"location[longitude]":V.lng,user:void 0,delivery_time:0,type:"restaurant"};"edit"===x?function(e,s){P.Z.update(q,s).then((()=>{_((0,M.nc)({activeMenu:I,data:e})),g()})).catch((e=>console.error(e))).finally((()=>S(!1)))}(e,t):function(e,s){P.Z.create(s).then((s=>{let{data:a}=s;_((0,M.SS)({id:`restaurant-${a.uuid}`,url:`restaurant/${a.uuid}`,name:f("add.restaurant"),data:{...a,background_img:{name:null===a||void 0===a?void 0:a.background_img},logo_img:{name:null===a||void 0===a?void 0:a.logo_img},...e},refetch:!1})),b(`/restaurant/${a.uuid}?step=1`)})).catch((e=>console.error(e))).finally((()=>S(!1)))}(e,t)},initialValues:{open:!1,status:"new",...I.data},children:[(0,w.jsx)($,{logoImage:F,setLogoImage:N,backImage:L,setBackImage:H,form:y,location:V,setLocation:D,user:Z}),(0,w.jsx)(n.Z,{children:(0,w.jsx)(r.Z,{type:"primary",htmlType:"submit",loading:k,children:f("next")})})]})})}},34295:(e,s,a)=>{"use strict";a.d(s,{Z:()=>p});var l=a(77483),t=a(72791),n=a(63446),r=a(72426),i=a.n(r),d=a(43507),o=a(56487),u=a(16871),c=a(10060),m=a(29656),h=a(80184);const p=e=>{let{next:s,prev:a}=e;const[r]=l.Z.useForm(),[p,g]=(0,t.useState)([]),[x,Z]=(0,t.useState)(new Array(7).fill(!1)),[v,j]=(0,t.useState)(!1),[f,y]=(0,t.useState)(!1),{uuid:b}=(0,u.UO)();return(0,t.useEffect)((()=>{r.setFieldsValue({working_days:c.P}),b&&(y(!0),o.Z.getById(b).then((e=>{g(e.data.closed_dates.filter((e=>e.day>i()(new Date).format("YYYY-MM-DD"))).map((e=>new Date(e.day))))})),d.Z.getById(b).then((e=>{Z(0!==e.data.dates.length?e.data.dates.map((e=>e.disabled)):[]),0!==e.data.dates.length&&r.setFieldsValue({working_days:e.data.dates.map((e=>({title:e.day,from:i()(e.from,"HH:mm:ss"),to:i()(e.to,"HH:mm:ss"),disabled:Boolean(e.disabled)})))})})).finally((()=>y(!1))))}),[]),(0,h.jsx)(h.Fragment,{children:f?(0,h.jsx)(n.Z,{}):(0,h.jsx)(m.Z,{onFinish:e=>{j(!0);const a={dates:p?p.map((e=>i()(e).format("YYYY-MM-DD"))):void 0},l={dates:e.working_days.map((e=>({day:e.title,from:i()(e.from?e.from:"00").format("HH-mm"),to:i()(e.to?e.to:"00").format("HH-mm"),disabled:e.disabled})))};o.Z.update(b,a).then((()=>{s()})).finally((()=>j(!1))),0!==e.working_days.length&&d.Z.update(b,l).then((()=>{s()})).finally((()=>j(!1)))},prev:a,form:r,lines:x,loadingBtn:v,days:p,setDays:g,setLines:Z,weeks:c.P})})}},44575:(e,s,a)=>{"use strict";a.d(s,{S:()=>l});const l=[{title:"restaurant",content:"First-content"},{title:"map",content:"Second-content"},{title:"delivery",content:"Third-content"},{title:"user",content:"Four-content"}]},95134:(e,s,a)=>{"use strict";a.d(s,{Z:()=>b});var l=a(72791),t=a(77483),n=a(66106),r=a(30914),i=a(86005),d=a(38243),o=a(83099),u=a(87309),c=a(16871),m=a(79337),h=a(28748),p=a(30577),g=a(48030),x=a(72426),Z=a.n(x),v=a(33168),j=a(63446),f=a(19011),y=a(80184);function b(e){var s;let{prev:a}=e;const{isDemo:x}=(0,f.Z)(),{t:b}=(0,v.$)(),{activeMenu:_}=(0,m.v9)((e=>e.menu),m.wU),w=(0,m.I0)(),q=(0,c.s0)(),[I,k]=(0,l.useState)(null),[S,F]=(0,l.useState)(!1),[N,L]=(0,l.useState)(!1),[$]=t.Z.useForm();console.log(x);return(0,l.useEffect)((()=>{var e,s,a;null!==_&&void 0!==_&&_.data&&(a=null===_||void 0===_||null===(e=_.data)||void 0===e||null===(s=e.seller)||void 0===s?void 0:s.uuid,L(!0),h.Z.getById(a).then((e=>{const s=e.data;$.setFieldsValue({firstname:s.firstname,lastname:s.lastname,email:s.email,phone:s.phone,password_confirmation:s.password_confirmation,password:s.password})})).finally((()=>L(!1))))}),[]),(0,y.jsx)(y.Fragment,{children:N?(0,y.jsx)(j.Z,{}):(0,y.jsx)(t.Z,{form:$,layout:"vertical",initialValues:{gender:"male",role:"admin",..._.data,birthday:null!==(s=_.data)&&void 0!==s&&s.birthday?Z()(_.data.birthday):null},onFinish:e=>{var s,a;F(!0);const l={firstname:e.firstname,lastname:e.lastname,email:e.email,phone:e.phone,password_confirmation:e.password_confirmation,password:e.password},t="restaurants";h.Z.update(null===_||void 0===_||null===(s=_.data)||void 0===s||null===(a=s.seller)||void 0===a?void 0:a.uuid,l).then((()=>{p.Am.success(b("successfully.updated")),q(`/${t}`),w((0,g.ph)({..._,nextUrl:t}))})).catch((e=>k(e.response.data.params))).finally((()=>F(!1)))},className:"py-4",children:(0,y.jsxs)(n.Z,{gutter:12,children:[(0,y.jsx)(r.Z,{span:12,children:(0,y.jsx)(t.Z.Item,{label:b("firstname"),name:"firstname",help:null!==I&&void 0!==I&&I.firstname?I.firstname[0]:null,validateStatus:null!==I&&void 0!==I&&I.firstname?"error":"success",rules:[{required:!1,message:b("required")}],children:(0,y.jsx)(i.Z,{className:"w-100"})})}),(0,y.jsx)(r.Z,{span:12,children:(0,y.jsx)(t.Z.Item,{label:b("lastname"),name:"lastname",help:null!==I&&void 0!==I&&I.lastname?I.lastname[0]:null,validateStatus:null!==I&&void 0!==I&&I.lastname?"error":"success",rules:[{required:!1,message:b("required")}],children:(0,y.jsx)(i.Z,{className:"w-100"})})}),x||(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(r.Z,{span:12,children:(0,y.jsx)(t.Z.Item,{label:b("phone"),name:"phone",help:null!==I&&void 0!==I&&I.phone?I.phone[0]:null,validateStatus:null!==I&&void 0!==I&&I.phone?"error":"success",rules:[{required:!1,message:b("required")}],children:(0,y.jsx)(d.Z,{min:0,className:"w-100"})})}),(0,y.jsx)(r.Z,{span:12,children:(0,y.jsx)(t.Z.Item,{label:b("email"),name:"email",help:null!==I&&void 0!==I&&I.email?I.email[0]:null,validateStatus:null!==I&&void 0!==I&&I.email?"error":"success",rules:[{required:!0,message:b("required")}],children:(0,y.jsx)(i.Z,{type:"email",className:"w-100"})})}),(0,y.jsx)(r.Z,{span:12,children:(0,y.jsx)(t.Z.Item,{label:b("password"),name:"password",help:null!==I&&void 0!==I&&I.password?I.password[0]:null,validateStatus:null!==I&&void 0!==I&&I.password?"error":"success",rules:[{required:!1,message:b("required")}],children:(0,y.jsx)(i.Z.Password,{type:"password",className:"w-100",autoComplete:"off"})})}),(0,y.jsx)(r.Z,{span:12,children:(0,y.jsx)(t.Z.Item,{label:b("password.confirmation"),help:null!==I&&void 0!==I&&I.password_confirmation?I.password_confirmation[0]:null,validateStatus:null!==I&&void 0!==I&&I.password_confirmation?"error":"success",name:"password_confirmation",dependencies:["password"],hasFeedback:!0,rules:[{required:!1,message:b("required")},e=>{let{getFieldValue:s}=e;return{validator:(e,a)=>a&&s("password")!==a?Promise.reject(b("passwords.do.not.match")):Promise.resolve()}}],children:(0,y.jsx)(i.Z.Password,{type:"password",className:"w-100",autoComplete:"off"})})})]}),(0,y.jsx)(r.Z,{span:24,children:(0,y.jsxs)(o.Z,{children:[(0,y.jsx)(u.Z,{type:"primary",htmlType:"submit",loading:S,children:b("save")}),(0,y.jsx)(u.Z,{htmlType:"submit",onClick:()=>a(),children:b("prev")})]})})]})})})}},24654:()=>{}}]);
//# sourceMappingURL=5163.12b168b5.chunk.js.map