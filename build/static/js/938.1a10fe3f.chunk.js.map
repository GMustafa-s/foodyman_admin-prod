{"version":3,"file":"static/js/938.1a10fe3f.chunk.js","mappings":"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","sources":["views/recepts/recept-add.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { Card, Form, Steps } from 'antd';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { removeFromMenu, setMenuData } from '../../redux/slices/menu';\n\nimport { useTranslation } from 'react-i18next';\nimport LanguageList from '../../components/language-list';\nimport { steps } from './steps';\nimport recieptService from '../../services/reciept';\nimport { IMG_URL } from 'configs/app-global';\n\nconst { Step } = Steps;\n\nconst ReceptAdd = () => {\n  const { t } = useTranslation();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n  const navigate = useNavigate();\n\n  const createImage = (name) => {\n    return {\n      name,\n      url: IMG_URL + name,\n    };\n  };\n  const [image, setImage] = useState(\n    activeMenu.data?.galleries?.[0]\n      ? [createImage(activeMenu.data?.galleries?.[0].path)]\n      : []\n  );\n  const [back, setBack] = useState(\n    activeMenu.data?.galleries?.[1]\n      ? [createImage(activeMenu.data?.galleries?.[1].path)]\n      : []\n  );\n  const images = [...image, ...back];\n\n  const [current, setCurrent] = useState(activeMenu.data?.step || 0);\n\n  const next = () => {\n    const step = current + 1;\n    setCurrent(step);\n  };\n\n  const prev = () => {\n    const step = current - 1;\n    setCurrent(step);\n  };\n  const [loadingBtn, setLoadingBtn] = useState(false);\n\n  useEffect(() => {\n    return () => {\n      const data = form.getFieldsValue(true);\n      dispatch(setMenuData({ activeMenu, data }));\n    };\n  }, []);\n\n  const onFinish = (values) => {\n    form.validateFields();\n    const body = {\n      ...values,\n      images: images.map((img) => img.name),\n      category_id: values.category_id.value,\n      shop_id: values.shop_id.value,\n      active_time: values.active_time.toString(),\n      total_time: values.total_time.toString(),\n      nutrition: values.nutrition.map((item) => ({\n        ...item,\n        percentage: String(item.percentage),\n        weight: String(item.weight),\n      })),\n      stocks: values.stocks?.map((stock) => ({\n        min_quantity: stock.min_quantity,\n        stock_id: stock.stock_id.value,\n      })),\n    };\n    setLoadingBtn(true);\n    const nextUrl = 'catalog/recept';\n    recieptService\n      .create(body)\n      .then(() => {\n        toast.success(t('successfully.created'));\n        navigate(`/${nextUrl}`);\n        dispatch(removeFromMenu({ ...activeMenu, nextUrl }));\n      })\n      .finally(() => setLoadingBtn(false));\n  };\n\n  return (\n    <Card title={t('add.recepe')} extra={<LanguageList />}>\n      <Form\n        layout='vertical'\n        onFinish={onFinish}\n        form={form}\n        initialValues={{ active: true, ...activeMenu.data }}\n      >\n        <Steps current={current}>\n          {steps.map((item) => (\n            <Step title={t(item.title)} key={item.title} />\n          ))}\n        </Steps>\n        {steps.map((item) => {\n          const Component = item.content;\n          return (\n            <div\n              key={item.title}\n              className={`steps-content ${\n                item.step !== current + 1 && 'hidden'\n              }`}\n            >\n              <Component\n                next={next}\n                prev={prev}\n                loading={loadingBtn}\n                image={image}\n                setImage={setImage}\n                back={back}\n                setBack={setBack}\n              />\n            </div>\n          );\n        })}\n      </Form>\n    </Card>\n  );\n};\n\nexport default ReceptAdd;\n"],"names":["Step","Steps","ReceptAdd","_activeMenu$data","_activeMenu$data$gall","_activeMenu$data2","_activeMenu$data2$gal","_activeMenu$data3","_activeMenu$data3$gal","_activeMenu$data4","_activeMenu$data4$gal","_activeMenu$data5","t","useTranslation","activeMenu","useSelector","state","menu","shallowEqual","dispatch","useDispatch","form","Form","navigate","useNavigate","createImage","name","url","IMG_URL","image","setImage","useState","data","galleries","path","back","setBack","images","current","setCurrent","step","next","prev","loadingBtn","setLoadingBtn","useEffect","getFieldsValue","setMenuData","_jsx","Card","title","extra","LanguageList","children","_jsxs","layout","onFinish","values","_values$stocks","validateFields","body","map","img","category_id","value","shop_id","active_time","toString","total_time","nutrition","item","percentage","String","weight","stocks","stock","min_quantity","stock_id","nextUrl","recieptService","then","toast","removeFromMenu","finally","initialValues","active","steps","Component","content","className","loading"],"sourceRoot":""}