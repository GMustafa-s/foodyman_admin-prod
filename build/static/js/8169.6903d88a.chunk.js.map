{"version":3,"file":"static/js/8169.6903d88a.chunk.js","mappings":"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","sources":["components/result-modal.js","views/reviews/orderReviews.js"],"sourcesContent":["import React from 'react';\nimport { Button, Modal, Result } from 'antd';\nimport { useTranslation } from 'react-i18next';\n\nconst ResultModal = ({\n  open,\n  handleCancel,\n  text,\n  click,\n  loading,\n  subTitle,\n}) => {\n  const { t } = useTranslation();\n\n  return (\n    <Modal closable={false} visible={open} footer={null} centered>\n      <Result status='warning' title={text} subTitle={subTitle} />\n      <div className='d-flex justify-content-end'>\n        <Button\n          type='primary'\n          className='mr-2'\n          onClick={click}\n          loading={loading}\n        >\n          {t('yes')}\n        </Button>\n        <Button onClick={() => handleCancel()}>{t('no')}</Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default ResultModal;\n","import React, { useContext, useEffect, useState } from 'react';\nimport { DeleteOutlined, EyeOutlined } from '@ant-design/icons';\nimport { Button, Card, Rate, Space, Table } from 'antd';\nimport { toast } from 'react-toastify';\nimport CustomModal from '../../components/modal';\nimport { Context } from '../../context/context';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { addMenu, disableRefetch, setMenuData } from '../../redux/slices/menu';\nimport useDidUpdate from '../../helpers/useDidUpdate';\nimport formatSortType from '../../helpers/formatSortType';\nimport { useTranslation } from 'react-i18next';\nimport reviewService from '../../services/review';\nimport { fetchOrderReviews } from '../../redux/slices/orderReview';\nimport OrderReviewShowModal from './orderReviewShow';\nimport moment from 'moment';\nimport { useNavigate } from 'react-router-dom';\nimport DeleteButton from '../../components/delete-button';\nimport FilterColumns from '../../components/filter-column';\nimport ResultModal from '../../components/result-modal';\n\nexport default function OrderReviews() {\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const goToDetail = (row) => {\n    dispatch(\n      addMenu({\n        url: `/users/user/${row.uuid}`,\n        id: 'user_info',\n        name: t('user.info'),\n      })\n    );\n    navigate(`/users/user/${row.uuid}`, { state: { user_id: row.id } });\n  };\n\n  const goToShop = (row) => {\n    dispatch(\n      addMenu({\n        id: 'edit-shop',\n        url: `shop/${row.uuid}`,\n        name: t('edit.shop'),\n      })\n    );\n    navigate(`/shop/${row.uuid}`);\n  };\n\n  const goToOrder = (id) => {\n    dispatch(\n      addMenu({\n        id: 'order_details',\n        url: `order/details/${id}`,\n        name: t('order.details'),\n      })\n    );\n    navigate(`/order/details/${id}`);\n  };\n\n  const [columns, setColumns] = useState([\n    {\n      title: t('order.id'),\n      dataIndex: 'order',\n      key: 'order',\n      render: (order) => (\n        <div className='text-hover' onClick={() => goToOrder(order.id)}>\n          #{order.id}\n        </div>\n      ),\n      sorter: true,\n      is_show: true,\n    },\n    {\n      title: t('user'),\n      dataIndex: 'user',\n      key: 'user',\n      is_show: true,\n      render: (user) => (\n        <div className='text-hover' onClick={() => goToDetail(user)}>\n          {user?.firstname} {user?.lastname || ''}\n        </div>\n      ),\n    },\n    {\n      title: t('shop'),\n      dataIndex: 'shop',\n      key: 'shop',\n      is_show: true,\n      render: (shop) => {\n        return (\n          <div className='text-hover' onClick={() => goToShop(shop)}>\n            {shop?.translation?.title}\n          </div>\n        );\n      },\n    },\n    {\n      title: t('rating'),\n      dataIndex: 'rating',\n      key: 'rating',\n      is_show: true,\n      render: (rating) => <Rate disabled defaultValue={rating} />,\n    },\n    {\n      title: t('created.at'),\n      dataIndex: 'created_at',\n      key: 'created_at',\n      is_show: true,\n      render: (createdAt) => moment(createdAt).format('YYYY-MM-DD HH:mm'),\n    },\n    {\n      title: t('options'),\n      key: 'options',\n      dataIndex: 'options',\n      is_show: true,\n      render: (data, row) => {\n        return (\n          <Space>\n            <Button\n              type='primary'\n              icon={<EyeOutlined />}\n              onClick={() => setShow(row.id)}\n            />\n            <DeleteButton\n              icon={<DeleteOutlined />}\n              onClick={() => {\n                setId([row.id]);\n                setIsModalVisible(true);\n                setText(true);\n              }}\n            />\n          </Space>\n        );\n      },\n    },\n  ]);\n\n  const { setIsModalVisible } = useContext(Context);\n  const [id, setId] = useState(null);\n  const [show, setShow] = useState(null);\n  const [loadingBtn, setLoadingBtn] = useState(false);\n  const [text, setText] = useState(null);\n  const [restore, setRestore] = useState(null);\n\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const { reviews, meta, loading, params } = useSelector(\n    (state) => state.orderReview,\n    shallowEqual\n  );\n\n  console.log('reviews => ', reviews);\n\n  const reviewDelete = () => {\n    setLoadingBtn(true);\n    const params = {\n      ...Object.assign(\n        {},\n        ...id.map((item, index) => ({\n          [`ids[${index}]`]: item,\n        }))\n      ),\n    };\n    reviewService\n      .delete(params)\n      .then(() => {\n        toast.success(t('successfully.deleted'));\n        dispatch(fetchOrderReviews());\n        setIsModalVisible(false);\n      })\n      .finally(() => setLoadingBtn(false));\n  };\n\n  const orderReviewDropAll = () => {\n    setLoadingBtn(true);\n    reviewService\n      .dropAll()\n      .then(() => {\n        toast.success(t('successfully.deleted'));\n        dispatch(fetchOrderReviews());\n        setRestore(null);\n      })\n      .finally(() => setLoadingBtn(false));\n  };\n\n  const orderReviewRestoreAll = () => {\n    setLoadingBtn(true);\n    reviewService\n      .restoreAll()\n      .then(() => {\n        toast.success(t('successfully.restored'));\n        dispatch(fetchOrderReviews());\n        setRestore(null);\n      })\n      .finally(() => setLoadingBtn(false));\n  };\n\n  useEffect(() => {\n    if (activeMenu.refetch) {\n      dispatch(fetchOrderReviews());\n      dispatch(disableRefetch(activeMenu));\n    }\n  }, [activeMenu.refetch]);\n\n  useDidUpdate(() => {\n    const data = activeMenu.data;\n    const paramsData = {\n      sort: data?.sort,\n      column: data?.column,\n      perPage: data?.perPage,\n      page: data?.page,\n    };\n    dispatch(fetchOrderReviews(paramsData));\n  }, [activeMenu.data]);\n\n  function onChangePagination(pagination, filters, sorter) {\n    const { pageSize: perPage, current: page } = pagination;\n    const { field: column, order } = sorter;\n    const sort = formatSortType(order);\n    dispatch(\n      setMenuData({ activeMenu, data: { perPage, page, column, sort } })\n    );\n  }\n\n  const onSelectChange = (newSelectedRowKeys) => {\n    setId(newSelectedRowKeys);\n  };\n\n  const rowSelection = {\n    id,\n    onChange: onSelectChange,\n  };\n\n  const allDelete = () => {\n    if (id === null || id.length === 0) {\n      toast.warning(t('select.the.product'));\n    } else {\n      setIsModalVisible(true);\n      setText(false);\n    }\n  };\n\n  return (\n    <Card\n      title={t('order.reviews')}\n      extra={\n        <Space wrap>\n          <DeleteButton size='' onClick={allDelete}>\n            {t('delete.selected')}\n          </DeleteButton>\n          <FilterColumns columns={columns} setColumns={setColumns} />\n        </Space>\n      }\n    >\n      <Table\n        scroll={{ x: true }}\n        rowSelection={rowSelection}\n        columns={columns?.filter((item) => item.is_show)}\n        dataSource={reviews}\n        pagination={{\n          pageSize: params.perPage,\n          page: params.page,\n          total: meta.total,\n          defaultCurrent: params.page,\n        }}\n        rowKey={(record) => record.id}\n        onChange={onChangePagination}\n        loading={loading}\n      />\n      <CustomModal\n        click={reviewDelete}\n        text={text ? t('delete') : t('all.delete')}\n        setText={setId}\n        loading={loadingBtn}\n      />\n      {show && (\n        <OrderReviewShowModal id={show} handleCancel={() => setShow(null)} />\n      )}\n\n      {restore && (\n        <ResultModal\n          open={restore}\n          handleCancel={() => setRestore(null)}\n          click={restore.restore ? orderReviewRestoreAll : orderReviewDropAll}\n          text={restore.restore ? t('restore.modal.text') : t('read.carefully')}\n          subTitle={restore.restore ? '' : t('confirm.deletion')}\n          loading={loadingBtn}\n          setText={setId}\n        />\n      )}\n    </Card>\n  );\n}\n"],"names":["_ref","open","handleCancel","text","click","loading","subTitle","t","useTranslation","_jsxs","Modal","closable","visible","footer","centered","children","_jsx","Result","status","title","className","Button","type","onClick","OrderReviews","dispatch","useDispatch","navigate","useNavigate","columns","setColumns","useState","dataIndex","key","render","order","id","addMenu","url","name","goToOrder","sorter","is_show","user","goToDetail","row","uuid","state","user_id","firstname","lastname","shop","_shop$translation","goToShop","translation","rating","Rate","disabled","defaultValue","createdAt","moment","format","data","Space","icon","EyeOutlined","setShow","DeleteButton","DeleteOutlined","setId","setIsModalVisible","setText","useContext","Context","show","loadingBtn","setLoadingBtn","restore","setRestore","activeMenu","useSelector","menu","shallowEqual","reviews","meta","params","orderReview","console","log","useEffect","refetch","fetchOrderReviews","disableRefetch","useDidUpdate","paramsData","sort","column","perPage","page","rowSelection","onChange","newSelectedRowKeys","Card","extra","wrap","size","allDelete","length","toast","FilterColumns","Table","scroll","x","filter","item","dataSource","pagination","pageSize","total","defaultCurrent","rowKey","record","filters","current","field","formatSortType","setMenuData","CustomModal","reviewDelete","Object","assign","map","index","reviewService","then","finally","OrderReviewShowModal","ResultModal","orderReviewRestoreAll","orderReviewDropAll"],"sourceRoot":""}