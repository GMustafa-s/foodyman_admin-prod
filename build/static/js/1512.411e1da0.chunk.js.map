{"version":3,"file":"static/js/1512.411e1da0.chunk.js","mappings":"6KAGO,MAAMA,EAAiBA,KAC5B,MAAMC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,MAEXC,EAAcC,IAAAA,MAASH,EAASI,OAAQ,CAAEC,mBAAmB,IAgCnE,MAAO,CACLC,OAAQJ,EACRK,IA/BUA,CAACC,EAAMC,IACjBX,EAAS,CAAEM,OAAQD,IAAAA,UAAa,IAAKD,EAAa,CAACM,GAAOC,MA+B1DC,MA3BaF,IACb,MAAMG,EAAY,IAAKT,GACnBS,EAAUH,WACLG,EAAUH,GAGnBV,EAAS,CAAEM,OAAQD,IAAAA,UAAa,IAAKQ,OAsBrCC,MA/BYA,IAAMd,EAAS,CAAEM,OAAQD,IAAAA,UAAa,MAgClDU,MA/BaP,GACbR,EAAS,CAAEM,OAAQD,IAAAA,UAAa,IAAKD,KAAgBI,MA+BrDQ,IApCWN,GAASN,EAAYM,GAqChCO,YAtBmBC,IACnB,MAAML,EAAY,IAAKT,KAAgBc,GACvClB,EAAS,CAAEM,OAAQD,IAAAA,UAAaQ,MAqBhCM,cAlBqBD,IACrB,MAAML,EAAY,IAAKT,GACvBc,EAAOE,SAASC,IACVR,EAAUQ,WACLR,EAAUQ,MAGrBrB,EAAS,CAAEM,OAAQD,IAAAA,UAAaQ,S,8OCtBpC,MAAM,KAAES,GAASC,EAAAA,EA6HjB,EA3HyBC,KAAO,IAADC,EAC7B,MAAM,EAAEC,IAAMC,EAAAA,EAAAA,MACR,KAAEC,IAASC,EAAAA,EAAAA,MACXzB,GAAcL,EAAAA,EAAAA,MACd,WAAE+B,IAAeC,EAAAA,EAAAA,KAAaC,GAAUA,EAAMC,MAAMC,EAAAA,KACpD,UAAEC,IAAcJ,EAAAA,EAAAA,KAAaC,GAAUA,EAAMI,UAAUF,EAAAA,IACvDG,GAAWC,EAAAA,EAAAA,MAEXC,EAAUC,QAAyB,QAAlBf,EAAArB,EAAYI,cAAM,IAAAiB,OAAA,EAAlBA,EAAoBgB,OAAQ,IAC5CC,EAASC,IAAcC,EAAAA,EAAAA,UAASd,EAAWe,SAC5CC,EAAOA,KACX,MAAML,EAAOF,EAAU,EACvBnC,EAAYK,IAAI,OAAQgC,IAEpBM,EAAOA,KACX,MAAMN,EAAOF,EAAU,EACvBnC,EAAYK,IAAI,OAAQgC,IAGpBO,EAAsBC,IAAU,IAADC,EACnC,OAAKD,EACE,CACLE,MAAW,OAAJF,QAAI,IAAJA,GAAAA,EAAMG,YAAkB,OAAJH,QAAI,IAAJA,GAAiB,QAAbC,EAAJD,EAAMG,mBAAW,IAAAF,OAAb,EAAJA,EAAmBG,MAAY,OAAJJ,QAAI,IAAJA,OAAI,EAAJA,EAAMI,MAC5D1C,MAAW,OAAJsC,QAAI,IAAJA,OAAI,EAAJA,EAAMK,IAHG,MA+CpB,SAASC,EAAkBC,GACzB,GAAS,OAAJA,QAAI,IAAJA,IAAAA,EAAMC,aACT,MAAO,GAET,MAAM,aAAEA,GAAiBD,EACnBE,EAASvB,EAAUwB,KAAKV,IAAI,IAAAW,EAAAC,EAAA,MAAM,CACtC,CAAC,SAASZ,EAAKa,WAEd,QAFuBF,EAAGH,EAAaM,MACrCC,GAAOA,EAAGF,SAAWb,EAAKa,gBAC5B,IAAAF,OAAA,EAF0BA,EAExBP,MACH,CAAC,eAAeJ,EAAKa,WAEpB,QAF6BD,EAAGJ,EAAaM,MAC3CC,GAAOA,EAAGF,SAAWb,EAAKa,gBAC5B,IAAAD,OAAA,EAFgCA,EAE9BI,gBAEL,OAAOC,OAAOC,OAAO,MAAOT,IAG9BU,EAAAA,EAAAA,YAAU,KACJtC,EAAWe,SAzDjB,SAAsBjB,GACpBe,GAAW,GACX0B,EAAAA,EAAAA,QACWzC,GACR0C,MAAMC,IAAS,IAADC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACb,MAAM1B,EAAO,IACL,OAAHe,QAAG,IAAHA,OAAG,EAAHA,EAAKf,QACLD,EAAqB,OAAHgB,QAAG,IAAHA,OAAG,EAAHA,EAAKf,MAC1B2B,KAAMnC,EAAsB,OAAHuB,QAAG,IAAHA,GAAS,QAANC,EAAHD,EAAKf,YAAI,IAAAgB,OAAN,EAAHA,EAAWW,MACpCC,KAAMpC,EAAsB,OAAHuB,QAAG,IAAHA,GAAS,QAANE,EAAHF,EAAKf,YAAI,IAAAiB,OAAN,EAAHA,EAAWW,MACpCC,OAAW,OAAHd,QAAG,IAAHA,GAAS,QAANG,EAAHH,EAAKf,YAAI,IAAAkB,GAAW,QAAXC,EAATD,EAAWY,OAAO,UAAE,IAAAX,OAAjB,EAAHA,EAAsBU,OAAO1B,KAAKK,GAAS,OAAFA,QAAE,IAAFA,OAAE,EAAFA,EAAIuB,iBACrDD,OAAW,OAAHf,QAAG,IAAHA,GAAS,QAANK,EAAHL,EAAKf,YAAI,IAAAoB,OAAN,EAAHA,EAAWU,OAAO3B,KAAK6B,IAAK,IAC/BA,KACAtB,OAAOC,OACR,MACGqB,EAAMH,OAAO1B,KAAI,CAAC8B,EAAOC,KAAG,CAC7B,CAAC,UAAUA,MAASD,EAAMnC,QAG9BqC,UAAe,OAALH,QAAK,IAALA,OAAK,EAALA,EAAOG,WAAY,EAC7BN,YAAQO,MAEVC,WAAe,OAAHtB,QAAG,IAAHA,GAAS,QAANM,EAAHN,EAAKf,YAAI,IAAAqB,GAAY,QAAZC,EAATD,EAAWgB,kBAAU,IAAAf,OAAlB,EAAHA,EAAuBnB,KAAI,CAACV,EAAM6C,KAAK,CACjDxC,GAAIwC,EACJ,CAAC,OAAW,OAAJ7C,QAAI,IAAJA,OAAI,EAAJA,EAAMa,WAAgB,OAAJb,QAAI,IAAJA,OAAI,EAAJA,EAAM8C,IAChC,CAAC,SAAS9C,EAAKa,WAAgB,OAAJb,QAAI,IAAJA,OAAI,EAAJA,EAAMtC,UAEnCyC,iBAAawC,EACbnC,kBAAcmC,EACdI,SAA6B,QAArBjB,EAAK,OAAHR,QAAG,IAAHA,GAAS,QAANS,EAAHT,EAAKf,YAAI,IAAAwB,OAAN,EAAHA,EAAWgB,gBAAQ,IAAAjB,EAAAA,EAAI,EACjCkB,IAAmB,QAAhBhB,EAAK,OAAHV,QAAG,IAAHA,GAAS,QAANW,EAAHX,EAAKf,YAAI,IAAA0B,OAAN,EAAHA,EAAWe,WAAG,IAAAhB,EAAAA,EAAI,GAEzB5C,GAAS6D,EAAAA,EAAAA,IAAY,CAAEpE,WAAAA,EAAY0B,KAAAA,QAEpC2C,SAAQ,KACPxD,GAAW,GACXN,GAAS+D,EAAAA,EAAAA,IAAetE,OAsB1BuE,CAAazE,KAEd,CAACE,EAAWe,UAOf,OACEyD,EAAAA,EAAAA,MAACC,EAAAA,EAAI,CAAClD,MAAO3B,EAAE,eAAgB+D,OAAOe,EAAAA,EAAAA,KAACC,EAAAA,EAAY,IAAIC,SAAA,EACrDF,EAAAA,EAAAA,KAACjF,EAAAA,EAAK,CAACgB,QAASA,EAASoE,SAPXlE,IAChBJ,GAAS6D,EAAAA,EAAAA,IAAY,CAAEpE,WAAAA,EAAY0B,KAAM,IAAK1B,EAAW0B,KAAMf,KAAAA,MAC/DrC,EAAYK,IAAI,OAAQgC,IAKsBiE,SACzCE,EAAAA,EAAAA,KAAW3D,IACVuD,EAAAA,EAAAA,KAAClF,EAAI,CAAC+B,MAAO3B,EAAEuB,EAAKI,QAAaJ,EAAKI,WAGxCX,GAeA8D,EAAAA,EAAAA,KAAA,OAAKK,UAAU,mDAAkDH,UAC/DF,EAAAA,EAAAA,KAACM,EAAAA,EAAI,CAACC,KAAK,QAAQF,UAAU,YAf/BP,EAAAA,EAAAA,MAAA,OAAKO,UAAU,gBAAeH,SAAA,CACA,kBAA3BE,EAAAA,EAAMrE,GAASyE,UACdR,EAAAA,EAAAA,KAACS,EAAAA,EAAU,CAACnE,KAAMA,IAGQ,kBAA3B8D,EAAAA,EAAMrE,GAASyE,UACdR,EAAAA,EAAAA,KAACU,EAAAA,EAAU,CAACpE,KAAMA,EAAMC,KAAMA,EAAMR,QAASA,IAGnB,mBAA3BqE,EAAAA,EAAMrE,GAASyE,UACdR,EAAAA,EAAAA,KAACW,EAAAA,EAAW,CAACpE,KAAMA,Y","sources":["helpers/useQueryParams.js","views/seller-views/addons/addons-clone.js"],"sourcesContent":["import { useNavigate, useLocation } from 'react-router-dom';\nimport qs from 'qs';\n\nexport const useQueryParams = () => {\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const queryParams = qs.parse(location.search, { ignoreQueryPrefix: true });\n\n  const get = (name) => queryParams[name];\n  const set = (name, value) =>\n    navigate({ search: qs.stringify({ ...queryParams, [name]: value }) });\n  const clear = () => navigate({ search: qs.stringify({}) });\n  const merge = (values) =>\n    navigate({ search: qs.stringify({ ...queryParams, ...values }) });\n  const reset = (name) => {\n    const newParams = { ...queryParams };\n    if (newParams[name]) {\n      delete newParams[name];\n    }\n\n    navigate({ search: qs.stringify({ ...newParams }) });\n  };\n\n  const setMultiple = (params) => {\n    const newParams = { ...queryParams, ...params };\n    navigate({ search: qs.stringify(newParams) });\n  };\n\n  const resetMultiple = (params) => {\n    const newParams = { ...queryParams };\n    params.forEach((param) => {\n      if (newParams[param]) {\n        delete newParams[param];\n      }\n    });\n    navigate({ search: qs.stringify(newParams) });\n  };\n\n  return {\n    values: queryParams,\n    set,\n    reset,\n    clear,\n    merge,\n    get,\n    setMultiple,\n    resetMultiple,\n  };\n};\n","import React, { useEffect, useState } from 'react';\nimport { Card, Spin, Steps } from 'antd';\nimport LanguageList from 'components/language-list';\nimport { useParams } from 'react-router-dom';\nimport productService from 'services/seller/product';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { disableRefetch, setMenuData } from 'redux/slices/menu';\nimport { useTranslation } from 'react-i18next';\nimport { useQueryParams } from 'helpers/useQueryParams';\nimport { steps } from './steps';\nimport AddonStock from './addons-stock';\nimport AddonFinish from './addons-finish';\nimport AddonIndex from './addons-index';\n\nconst { Step } = Steps;\n\nconst SellerAddonClone = () => {\n  const { t } = useTranslation();\n  const { uuid } = useParams();\n  const queryParams = useQueryParams();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const { languages } = useSelector((state) => state.formLang, shallowEqual);\n  const dispatch = useDispatch();\n\n  const current = Number(queryParams.values?.step || 0);\n  const [loading, setLoading] = useState(activeMenu.refetch);\n  const next = () => {\n    const step = current + 1;\n    queryParams.set('step', step);\n  };\n  const prev = () => {\n    const step = current - 1;\n    queryParams.set('step', step);\n  };\n\n  const createSelectObject = (item) => {\n    if (!item) return null;\n    return {\n      label: item?.translation ? item?.translation?.title : item?.title,\n      value: item?.id,\n    };\n  };\n\n  function fetchProduct(uuid) {\n    setLoading(true);\n    productService\n      .getById(uuid)\n      .then((res) => {\n        const data = {\n          ...res?.data,\n          ...getLanguageFields(res?.data),\n          shop: createSelectObject(res?.data?.shop),\n          unit: createSelectObject(res?.data?.unit),\n          extras: res?.data?.stocks[0]?.extras.map((el) => el?.extra_group_id),\n          stocks: res?.data?.stocks.map((stock) => ({\n            ...stock,\n            ...Object.assign(\n              {},\n              ...stock.extras.map((extra, idx) => ({\n                [`extras[${idx}]`]: extra.id,\n              })),\n            ),\n            quantity: stock?.quantity || 0,\n            extras: undefined,\n          })),\n          properties: res?.data?.properties?.map((item, index) => ({\n            id: index,\n            [`key[${item?.locale}]`]: item?.key,\n            [`value[${item.locale}]`]: item?.value,\n          })),\n          translation: undefined,\n          translations: undefined,\n          interval: res?.data?.interval ?? 1,\n          tax: res?.data?.tax ?? 0,\n        };\n        dispatch(setMenuData({ activeMenu, data }));\n      })\n      .finally(() => {\n        setLoading(false);\n        dispatch(disableRefetch(activeMenu));\n      });\n  }\n\n  function getLanguageFields(data) {\n    if (!data?.translations) {\n      return {};\n    }\n    const { translations } = data;\n    const result = languages.map((item) => ({\n      [`title[${item.locale}]`]: translations.find(\n        (el) => el.locale === item.locale,\n      )?.title,\n      [`description[${item.locale}]`]: translations.find(\n        (el) => el.locale === item.locale,\n      )?.description,\n    }));\n    return Object.assign({}, ...result);\n  }\n\n  useEffect(() => {\n    if (activeMenu.refetch) {\n      fetchProduct(uuid);\n    }\n  }, [activeMenu.refetch]);\n\n  const onChange = (step) => {\n    dispatch(setMenuData({ activeMenu, data: { ...activeMenu.data, step } }));\n    queryParams.set('step', step);\n  };\n\n  return (\n    <Card title={t('clone.addon')} extra={<LanguageList />}>\n      <Steps current={current} onChange={onChange}>\n        {steps.map((item) => (\n          <Step title={t(item.title)} key={item.title} />\n        ))}\n      </Steps>\n      {!loading ? (\n        <div className='steps-content'>\n          {steps[current].content === 'First-content' && (\n            <AddonIndex next={next} />\n          )}\n\n          {steps[current].content === 'Third-content' && (\n            <AddonStock next={next} prev={prev} current={current} />\n          )}\n\n          {steps[current].content === 'Finish-content' && (\n            <AddonFinish prev={prev} />\n          )}\n        </div>\n      ) : (\n        <div className='d-flex justify-content-center align-items-center'>\n          <Spin size='large' className='py-5' />\n        </div>\n      )}\n    </Card>\n  );\n};\nexport default SellerAddonClone;\n"],"names":["useQueryParams","navigate","useNavigate","location","useLocation","queryParams","qs","search","ignoreQueryPrefix","values","set","name","value","reset","newParams","clear","merge","get","setMultiple","params","resetMultiple","forEach","param","Step","Steps","SellerAddonClone","_queryParams$values","t","useTranslation","uuid","useParams","activeMenu","useSelector","state","menu","shallowEqual","languages","formLang","dispatch","useDispatch","current","Number","step","loading","setLoading","useState","refetch","next","prev","createSelectObject","item","_item$translation","label","translation","title","id","getLanguageFields","data","translations","result","map","_translations$find","_translations$find2","locale","find","el","description","Object","assign","useEffect","productService","then","res","_res$data","_res$data2","_res$data3","_res$data3$stocks$","_res$data4","_res$data5","_res$data5$properties","_res$data$interval","_res$data6","_res$data$tax","_res$data7","shop","unit","extras","stocks","extra_group_id","stock","extra","idx","quantity","undefined","properties","index","key","interval","tax","setMenuData","finally","disableRefetch","fetchProduct","_jsxs","Card","_jsx","LanguageList","children","onChange","steps","className","Spin","size","content","AddonIndex","AddonStock","AddonFinish"],"sourceRoot":""}