{"version":3,"file":"static/js/9331.b4dda078.chunk.js","mappings":"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","sources":["helpers/getTranslationFields.js","views/blog/blog-clone.js"],"sourcesContent":["export default function getTranslationFields(\n  languages,\n  values,\n  field = 'title',\n) {\n  const list = languages?.map((item) => ({\n    [item?.locale]: !values[`${field}[${item?.locale}]`]\n      ? undefined\n      : values[`${field}[${item?.locale}]`],\n  }));\n  return Object.assign({}, ...list);\n}\n","import React, { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { Card, Form, Spin } from 'antd';\nimport { batch, shallowEqual, useDispatch, useSelector } from 'react-redux';\n\nimport {\n  disableRefetch,\n  removeFromMenu,\n  setMenuData,\n} from '../../redux/slices/menu';\nimport { fetchBlogs } from '../../redux/slices/blog';\nimport blogService from '../../services/blog';\nimport LanguageList from '../../components/language-list';\nimport getTranslationFields from '../../helpers/getTranslationFields';\nimport createImage from '../../helpers/createImage';\nimport { useTranslation } from 'react-i18next';\nimport BlogForm from './blog-form';\n\nexport default function BlogClone() {\n  const { t } = useTranslation();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const { languages } = useSelector((state) => state.formLang, shallowEqual);\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n  const navigate = useNavigate();\n  const { uuid } = useParams();\n\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    return () => {\n      const data = form.getFieldsValue(true);\n      dispatch(setMenuData({ activeMenu, data }));\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleSubmit = (values, image) => {\n    const nextUrl = 'blogs';\n    const paramsData = { status: 'published', type: 'blog' };\n    const body = {\n      type: 'blog',\n      active: values.active ? 1 : 0,\n      images: [image[0]?.name],\n      title: getTranslationFields(languages, values),\n      description: getTranslationFields(languages, values, 'description'),\n      short_desc: getTranslationFields(languages, values, 'short_desc'),\n    };\n\n    return blogService.create(body).then(() => {\n      toast.success(t('successfully.cloned'));\n      batch(() => {\n        dispatch(removeFromMenu({ ...activeMenu, nextUrl }));\n        dispatch(fetchBlogs(paramsData));\n      });\n      navigate(`/${nextUrl}`);\n    });\n  };\n\n  function getLanguageFields(data) {\n    if (!data) {\n      return {};\n    }\n    const { translations } = data;\n    const result = languages.map((item) => ({\n      [`title[${item.locale}]`]: translations.find(\n        (el) => el.locale === item.locale,\n      )?.title,\n      [`description[${item.locale}]`]: translations.find(\n        (el) => el.locale === item.locale,\n      )?.description,\n      [`short_desc[${item.locale}]`]: translations.find(\n        (el) => el.locale === item.locale,\n      )?.short_desc,\n    }));\n    return Object.assign({}, ...result);\n  }\n\n  const fetchBlog = (uuid) => {\n    setLoading(true);\n    blogService\n      .getById(uuid)\n      .then((res) => {\n        let blog = res.data;\n        const data = {\n          ...blog,\n          ...getLanguageFields(blog),\n          image: [createImage(blog.img)],\n        };\n        form.setFieldsValue(data);\n        dispatch(setMenuData({ activeMenu, data }));\n      })\n      .finally(() => {\n        setLoading(false);\n        dispatch(disableRefetch(activeMenu));\n      });\n  };\n\n  useEffect(() => {\n    if (activeMenu.refetch) {\n      fetchBlog(uuid);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [activeMenu.refetch]);\n\n  return (\n    <Card title={t('clone.blog')} extra={<LanguageList />}>\n      {!loading ? (\n        <BlogForm form={form} handleSubmit={handleSubmit} />\n      ) : (\n        <div className='d-flex justify-content-center align-items-center'>\n          <Spin size='large' className='py-5' />\n        </div>\n      )}\n    </Card>\n  );\n}\n"],"names":["getTranslationFields","languages","values","field","arguments","length","undefined","list","map","item","locale","Object","assign","BlogClone","t","useTranslation","activeMenu","useSelector","state","menu","shallowEqual","formLang","dispatch","useDispatch","form","Form","navigate","useNavigate","uuid","useParams","loading","setLoading","useState","useEffect","data","getFieldsValue","setMenuData","getLanguageFields","translations","result","_translations$find","_translations$find2","_translations$find3","find","el","title","description","short_desc","refetch","blogService","then","res","blog","image","createImage","img","setFieldsValue","finally","disableRefetch","fetchBlog","_jsx","Card","extra","LanguageList","children","className","Spin","size","BlogForm","handleSubmit","_image$","nextUrl","paramsData","status","type","body","active","images","name","toast","batch","removeFromMenu","fetchBlogs"],"sourceRoot":""}