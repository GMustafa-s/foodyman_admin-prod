{"version":3,"file":"static/js/1762.f252caab.chunk.js","mappings":"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","sources":["components/infinite-select.js","views/seller-views/product-bonus/product-bonus-edit.js","views/seller-views/product-bonus/product-bonus-form.js"],"sourcesContent":["import React, { useState, useMemo } from 'react';\nimport debounce from 'lodash/debounce';\nimport { Select, Spin } from 'antd';\n\nexport const InfiniteSelect = ({\n  fetchOptions,\n  debounceTimeout = 400,\n  hasMore,\n  refetchOnFocus = false,\n  ...props\n}) => {\n  const [fetching, setFetching] = useState(false);\n  const [options, setOptions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [search, setSearch] = useState(null);\n  const [currentPage, setCurrentPage] = useState(1);\n\n  const debounceFetcher = useMemo(() => {\n    const loadOptions = (value) => {\n      setOptions([]);\n      setSearch(value);\n      setFetching(true);\n      fetchOptions({ search: value })\n        .then((newOptions) => {\n          setOptions(newOptions);\n          setCurrentPage(2);\n          setFetching(false);\n        })\n        .finally(() => setLoading(false));\n    };\n    return debounce(loadOptions, debounceTimeout);\n  }, [fetchOptions, debounceTimeout, currentPage]);\n\n  const fetchOnFocus = () => {\n    if (refetchOnFocus) {\n      debounceFetcher('');\n    } else {\n      if (!options?.length) {\n        debounceFetcher('');\n      }\n    }\n  };\n\n  const onScroll = async (event) => {\n    const target = event.target;\n    if (\n      !loading &&\n      target.scrollTop + target.offsetHeight === target.scrollHeight\n    ) {\n      if (hasMore) {\n        setLoading(true);\n        // target.scrollTo(0, target.scrollHeight);\n        fetchOptions({ search: search, page: currentPage })\n          .then((item) => {\n            setCurrentPage((i) => i + 1);\n            setOptions([...options, ...item]);\n          })\n          .finally(() => setLoading(false));\n      }\n    }\n  };\n\n  return (\n    <Select\n      showSearch\n      allowClear\n      onPopupScroll={onScroll}\n      labelInValue={true}\n      filterOption={false}\n      onSearch={debounceFetcher}\n      notFoundContent={fetching ? <Spin size='small' /> : 'no results'}\n      onFocus={fetchOnFocus}\n      {...props}\n    >\n      {options.map((item, index) => (\n        <Select.Option key={index} value={item.value}>\n          {item.label}\n        </Select.Option>\n      ))}\n      {loading && (\n        <Select.Option>\n          <Spin size='small' />\n        </Select.Option>\n      )}\n    </Select>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { Card, Form } from 'antd';\nimport { batch, shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport {\n  disableRefetch,\n  removeFromMenu,\n  setMenuData,\n} from '../../../redux/slices/menu';\nimport { useTranslation } from 'react-i18next';\nimport moment from 'moment';\nimport { fetchBonus } from '../../../redux/slices/product-bonus';\nimport bonusService from '../../../services/seller/bonus';\nimport Loading from '../../../components/loading';\nimport ProductBonusForm from './product-bonus-form';\n\nconst ProductBonusAdd = () => {\n  const { t } = useTranslation();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const { id } = useParams();\n\n  useEffect(() => {\n    return () => {\n      const data = form.getFieldsValue(true);\n      const dataString = {\n        ...data,\n        expired_at: JSON.stringify(data?.expired_at),\n      };\n      dispatch(setMenuData({ activeMenu, data: dataString }));\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  function getProducts(bonus) {\n    const body = {\n      ...bonus,\n      expired_at: moment(bonus.expired_at, 'YYYY-MM-DD'),\n      bonusable_id: {\n        label: `${bonus?.bonusable?.product?.translation?.title} ${bonus?.bonusable?.extras?.length ? ` => ${bonus?.bonusable?.extras?.map((ext) => `${ext?.group?.translation?.title}: ${ext?.value}`)?.join(', ')}` : ''}`,\n        value: bonus?.bonusable?.id,\n        key: bonus?.bonusable?.id,\n      },\n      bonus_stock_id: {\n        label: `${bonus?.bonusStock?.product?.translation?.title} ${bonus?.bonusStock?.extras?.length ? ` => ${bonus?.bonusStock?.extras?.map((ext) => `${ext?.group?.translation?.title}: ${ext?.value}`)?.join(', ')}` : ''}`,\n        value: bonus?.bonusStock?.id,\n        key: bonus?.bonusStock?.id,\n      },\n    };\n\n    form.setFieldsValue({\n      ...body,\n    });\n\n    dispatch(\n      setMenuData({\n        activeMenu,\n        data: { ...body, expired_at: JSON.stringify(body.expired_at) },\n      }),\n    );\n    setLoading(false);\n  }\n\n  const getBonus = (id) => {\n    setLoading(true);\n    bonusService\n      .getById(id)\n      .then((res) => {\n        let bonus = res.data;\n        getProducts(bonus);\n      })\n      .finally(() => {\n        setLoading(false);\n        dispatch(disableRefetch(activeMenu));\n      });\n  };\n\n  useEffect(() => {\n    if (activeMenu.refetch) {\n      getBonus(id);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [activeMenu.refetch]);\n\n  const handleSubmit = (values) => {\n    const body = {\n      expired_at: moment(values.expired_at).format('YYYY-MM-DD'),\n      status: values.status,\n      type: 'count',\n      bonusable_id: values.bonusable_id.value,\n      value: values.value,\n      bonus_stock_id: values.bonus_stock_id.value,\n      bonus_quantity: values.bonus_quantity,\n    };\n    const nextUrl = 'seller/bonus/product';\n\n    bonusService.update(id, body).then(() => {\n      toast.success(t('successfully.updated'));\n      batch(() => {\n        dispatch(removeFromMenu({ ...activeMenu, nextUrl }));\n        dispatch(fetchBonus({}));\n      });\n      navigate(`/${nextUrl}`);\n    });\n  };\n\n  return (\n    <Card title={t('edit.bonus')} className='h-100'>\n      {!loading ? (\n        <ProductBonusForm form={form} handleSubmit={handleSubmit} />\n      ) : (\n        <Loading />\n      )}\n    </Card>\n  );\n};\n\nexport default ProductBonusAdd;\n","import React, { useState } from 'react';\nimport { Button, Col, DatePicker, Form, InputNumber, Row, Switch } from 'antd';\nimport moment from 'moment/moment';\nimport { useTranslation } from 'react-i18next';\nimport { shallowEqual, useSelector } from 'react-redux';\nimport productService from 'services/seller/product';\nimport { InfiniteSelect } from 'components/infinite-select';\n\nexport default function ProductBonusForm({ form, handleSubmit }) {\n  const { t } = useTranslation();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n\n  //states\n  const [loadingBtn, setLoadingBtn] = useState(false);\n  const [hasMore, setHasMore] = useState({\n    product: false,\n    bonusProduct: false,\n  });\n\n  //functions\n  function fetchProductsStock({ page = 1, search }) {\n    const params = {\n      page,\n      search: search?.length ? search : undefined,\n    };\n    return productService.getStock(params).then((res) => {\n      setHasMore({\n        ...hasMore,\n        product: res?.meta?.current_page < res?.meta?.last_page,\n      });\n      return res.data.map((stock) => ({\n        label: `${stock?.product?.translation?.title} ${\n          stock?.extras?.length\n            ? `=> ${stock?.extras\n                ?.map(\n                  (extra) =>\n                    `${extra?.group?.translation?.title}: ${extra?.value}`,\n                )\n                ?.join(', ')}`\n            : ''\n        }`,\n        value: stock?.id,\n        key: stock?.id,\n      }));\n    });\n  }\n  function fetchBonusProductsStock({ page = 1, search }) {\n    const params = {\n      page,\n      search: search?.length ? search : undefined,\n    };\n    return productService.getStock(params).then((res) => {\n      setHasMore({\n        ...hasMore,\n        bonusProduct: res?.meta?.current_page < res?.meta?.last_page,\n      });\n      return res.data.map((stock) => ({\n        label: `${stock?.product?.translation?.title} ${\n          stock?.extras?.length\n            ? `=> ${stock?.extras\n                ?.map(\n                  (extra) =>\n                    `${extra?.group?.translation?.title}: ${extra?.value}`,\n                )\n                ?.join(', ')}`\n            : ''\n        }`,\n        value: stock?.id,\n        key: stock?.id,\n      }));\n    });\n  }\n\n  //helpers\n  const getInitialTimes = () => {\n    if (!activeMenu.data?.expired_at) {\n      return {};\n    }\n    const data = JSON.parse(activeMenu.data?.expired_at);\n    return {\n      expired_at: moment(data, 'HH:mm:ss'),\n    };\n  };\n\n  //submit form\n  const onFinish = (values) => {\n    setLoadingBtn(true);\n    handleSubmit(values).finally(() => setLoadingBtn(false));\n  };\n\n  return (\n    <Form\n      name='product-bonus-form'\n      layout='vertical'\n      onFinish={onFinish}\n      form={form}\n      initialValues={{\n        status: true,\n        ...activeMenu.data,\n        ...getInitialTimes(),\n      }}\n      className='d-flex flex-column h-100'\n    >\n      <Row gutter={12}>\n        <Col span={12}>\n          <Form.Item\n            label={t('products.stock')}\n            name={'bonusable_id'}\n            rules={[\n              {\n                required: true,\n                message: t('required'),\n              },\n            ]}\n          >\n            <InfiniteSelect\n              fetchOptions={fetchProductsStock}\n              hasMore={hasMore.product}\n              allowClear={false}\n            />\n          </Form.Item>\n        </Col>\n        <Col span={12}>\n          <Form.Item\n            label={t('product.quantity')}\n            name={'value'}\n            rules={[\n              {\n                required: true,\n                message: t('required'),\n              },\n            ]}\n          >\n            <InputNumber className='w-100' />\n          </Form.Item>\n        </Col>\n        <Col span={12}>\n          <Form.Item\n            label={t('bonus.product.stock')}\n            name={'bonus_stock_id'}\n            rules={[\n              {\n                required: true,\n                message: t('required'),\n              },\n            ]}\n          >\n            <InfiniteSelect\n              fetchOptions={fetchBonusProductsStock}\n              hasMore={hasMore.bonusProduct}\n              allowClear={false}\n            />\n          </Form.Item>\n        </Col>\n        <Col span={12}>\n          <Form.Item\n            label={t('bonus.product.quantity')}\n            name={'bonus_quantity'}\n            rules={[\n              {\n                required: true,\n                message: t('required'),\n              },\n            ]}\n          >\n            <InputNumber className='w-100' />\n          </Form.Item>\n        </Col>\n        <Col span={12}>\n          <Form.Item\n            name='expired_at'\n            label={t('expired.at')}\n            rules={[{ required: true, message: t('required') }]}\n          >\n            <DatePicker\n              className='w-100'\n              placeholder=''\n              disabledDate={(current) => moment().add(-1, 'days') >= current}\n            />\n          </Form.Item>\n        </Col>\n        <Col span={8}>\n          <Form.Item label={t('active')} name='status' valuePropName='checked'>\n            <Switch />\n          </Form.Item>\n        </Col>\n      </Row>\n      <div className='flex-grow-1 d-flex flex-column justify-content-end'>\n        <div className='pb-5'>\n          <Button type='primary' htmlType='submit' loading={loadingBtn}>\n            {t('submit')}\n          </Button>\n        </div>\n      </div>\n    </Form>\n  );\n}\n"],"names":["InfiniteSelect","_ref","fetchOptions","debounceTimeout","hasMore","refetchOnFocus","props","fetching","setFetching","useState","options","setOptions","loading","setLoading","search","setSearch","currentPage","setCurrentPage","debounceFetcher","useMemo","debounce","value","then","newOptions","finally","_jsxs","Select","showSearch","allowClear","onPopupScroll","async","target","event","scrollTop","offsetHeight","scrollHeight","page","item","i","labelInValue","filterOption","onSearch","notFoundContent","_jsx","Spin","size","onFocus","fetchOnFocus","length","children","map","index","label","ProductBonusAdd","t","useTranslation","activeMenu","useSelector","state","menu","shallowEqual","dispatch","useDispatch","form","Form","navigate","useNavigate","id","useParams","useEffect","data","getFieldsValue","dataString","expired_at","JSON","stringify","setMenuData","getBonus","bonusService","res","bonus","_bonus$bonusable","_bonus$bonusable$prod","_bonus$bonusable$prod2","_bonus$bonusable2","_bonus$bonusable2$ext","_bonus$bonusable3","_bonus$bonusable3$ext","_bonus$bonusable3$ext2","_bonus$bonusable4","_bonus$bonusable5","_bonus$bonusStock","_bonus$bonusStock$pro","_bonus$bonusStock$pro2","_bonus$bonusStock2","_bonus$bonusStock2$ex","_bonus$bonusStock3","_bonus$bonusStock3$ex","_bonus$bonusStock3$ex2","_bonus$bonusStock4","_bonus$bonusStock5","body","moment","bonusable_id","bonusable","product","translation","title","extras","ext","_ext$group","_ext$group$translatio","group","join","key","bonus_stock_id","bonusStock","_ext$group2","_ext$group2$translati","setFieldsValue","getProducts","disableRefetch","refetch","Card","className","Loading","ProductBonusForm","handleSubmit","values","format","status","type","bonus_quantity","nextUrl","toast","batch","removeFromMenu","fetchBonus","loadingBtn","setLoadingBtn","setHasMore","bonusProduct","name","layout","onFinish","initialValues","getInitialTimes","_activeMenu$data","_activeMenu$data2","parse","Row","gutter","Col","span","rules","required","message","_ref2","params","undefined","productService","_res$meta","_res$meta2","meta","current_page","last_page","stock","_stock$product","_stock$product$transl","_stock$extras","_stock$extras2","_stock$extras2$map","extra","_extra$group","_extra$group$translat","InputNumber","_ref3","_res$meta3","_res$meta4","_stock$product2","_stock$product2$trans","_stock$extras3","_stock$extras4","_stock$extras4$map","_extra$group2","_extra$group2$transla","DatePicker","placeholder","disabledDate","current","add","valuePropName","Switch","Button","htmlType"],"sourceRoot":""}