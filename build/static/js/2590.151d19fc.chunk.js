"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[2590],{37508:(e,t,l)=>{l.r(t),l.d(t,{default:()=>g});var a=l(72791),i=l(16871),n=l(30577),s=l(77483),o=l(54080),u=l(37083),d=l(79337),r=l(48030),c=l(28767),v=l(19568),h=l(33168),p=l(87320),b=l(12098),f=l(21096),m=l(80184);const g=()=>{const{t:e}=(0,h.$)(),{activeMenu:t}=(0,d.v9)((e=>e.menu),d.wU),l=(0,d.I0)(),[g]=s.Z.useForm(),x=(0,i.s0)(),{id:Z}=(0,i.UO)(),[j,_]=(0,a.useState)(!1),{languages:k}=(0,d.v9)((e=>e.formLang),d.wU);function y(e){if(!e)return{};const{translations:t}=e,l=k.map((e=>{var l,a,i;return{[`title[${e.locale}]`]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.title,[`description[${e.locale}]`]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.description,[`button_text[${e.locale}]`]:null===(i=t.find((t=>t.locale===e.locale)))||void 0===i?void 0:i.button_text}}));return Object.assign({},...l)}return(0,a.useEffect)((()=>{var e;null!==t&&void 0!==t&&t.refetch&&(e=Z,_(!0),v.Z.getById(e).then((e=>{var a;let i=e.data;const n={...i,img:(s=i.galleries,s.map((e=>({uid:e.id,name:e.path,url:e.path})))),shops:null===i||void 0===i||null===(a=i.shops)||void 0===a?void 0:a.map((e=>{var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id}})),...y(i)};var s;g.setFieldsValue(n),l((0,r.nc)({activeMenu:t,data:n}))})).finally((()=>{l((0,r.A_)(t)),_(!1)})))}),[null===t||void 0===t?void 0:t.refetch]),(0,m.jsx)(o.Z,{title:e("edit.banner"),className:"h-100",extra:(0,m.jsx)(p.Z,{}),children:j?(0,m.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,m.jsx)(u.Z,{size:"large",className:"py-5"})}):(0,m.jsx)(f.Z,{form:g,handleSubmit:(a,i)=>{var s;const o="banners",u={status:"published"},h={url:a.url,shops:null===a||void 0===a||null===(s=a.shops)||void 0===s?void 0:s.map((e=>e.value)),images:null===i||void 0===i?void 0:i.map((e=>e.name)),clickable:a.clickable,title:(0,b.Z)(k,a,"title"),description:(0,b.Z)(k,a,"description"),button_text:(0,b.Z)(k,a,"button_text")};return v.Z.update(Z,h).then((()=>{n.Am.success(e("successfully.updated")),(0,d.dC)((()=>{l((0,r.ph)({...t,nextUrl:o})),l((0,c.f)(u))})),x("/banners")}))}})})}}}]);
//# sourceMappingURL=2590.151d19fc.chunk.js.map