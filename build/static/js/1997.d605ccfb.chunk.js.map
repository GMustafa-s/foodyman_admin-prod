{"version":3,"file":"static/js/1997.d605ccfb.chunk.js","mappings":"wOAEA,MAKA,EAL6B,CAC3BA,OAASC,GAASC,EAAAA,EAAAA,KAAa,wCAAyCD,GACxEE,OAASF,GAASC,EAAAA,EAAAA,KAAa,wCAAyCD,I,qCCM3D,SAASG,IACtB,MAAOC,EAAYC,IAAiBC,EAAAA,EAAAA,WAAS,GACvCC,GAAWC,EAAAA,EAAAA,OACX,EAAEC,IAAMC,EAAAA,EAAAA,MAER,WAAEC,IAAeC,EAAAA,EAAAA,KAAaC,GAAUA,EAAMC,MAAMC,EAAAA,IAUpDC,EAAcC,IACX,CACLC,IAAKD,EAAKE,MACVC,KAAMH,EAAKE,MACXE,OAAQ,OACRC,IAAKL,EAAKE,MACVI,SAAS,IAuBb,OACEC,EAAAA,EAAAA,KAACC,EAAAA,EAAI,CACHN,MAAOV,EAAE,iBAUTiB,UAEAC,EAAAA,EAAAA,MAACC,EAAAA,EAAO,CACNR,KAAK,OACLS,UAAU,EACVC,SAAU,EACVC,cArCeC,IAA0B,IAAzB,KAAEf,EAAI,UAAEgB,GAAWD,EACvC,MAAME,EAAW,IAAIC,SACrBD,EAASE,OAAO,OAAQnB,GACxBoB,EAAAA,OAAqBH,GAAUI,MAAKC,IAAe,IAAd,KAAEvC,GAAMuC,EAC3ChC,GAASiC,EAAAA,EAAAA,IAAY,CAAE7B,WAAAA,EAAYX,KAAMgB,EAAWhB,MACpDiC,EAAU,UAiCRQ,gBAA2B,OAAV9B,QAAU,IAAVA,GAAAA,EAAYX,KAAO,CAAW,OAAVW,QAAU,IAAVA,OAAU,EAAVA,EAAYX,MAAQ,KACzD0C,aA9BgBzB,IACpB,MAAM0B,EAAsB,cAAd1B,EAAK2B,KACbC,EAAsB,cAAd5B,EAAK2B,KACbE,EAAuB,eAAd7B,EAAK2B,KACpB,GAAID,GAASG,GAAUD,EAErB,OADAE,EAAAA,GAAAA,MAAY,GAAG9B,EAAKG,2BACb,GAwBsBM,SAAA,EAE3BF,EAAAA,EAAAA,KAAA,KAAGwB,UAAU,uBAAsBtB,UACjCF,EAAAA,EAAAA,KAACyB,EAAAA,EAAa,OAEhBzB,EAAAA,EAAAA,KAAA,KAAGwB,UAAU,kBAAiBtB,SAAC,+CAG/BF,EAAAA,EAAAA,KAAA,KAAGwB,UAAU,kBAAiBtB,SAAC","sources":["services/update-booking.js","views/booking-file-upload/index.js"],"sourcesContent":["import request from './request';\n\nconst updateBookingService = {\n  upload: (data) => request.post('dashboard/admin/module/booking/upload', data),\n  update: (data) => request.post('dashboard/admin/module/booking/upload', data),\n};\n\nexport default updateBookingService;\n","import React, { useState } from 'react';\nimport { Card, Button } from 'antd';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport Dragger from 'antd/lib/upload/Dragger';\nimport { CloudUploadOutlined, InboxOutlined } from '@ant-design/icons';\nimport updateService from '../../services/update-booking';\nimport { setMenuData } from '../../redux/slices/menu';\nimport { toast } from 'react-toastify';\n\nexport default function BookingFileUpload() {\n  const [loadingBtn, setLoadingBtn] = useState(false);\n  const dispatch = useDispatch();\n  const { t } = useTranslation();\n\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n\n  const updateBackend = () => {\n    setLoadingBtn(true);\n    updateService\n      .update()\n      .then(() => toast.success(t('successfully.updated')))\n      .finally(() => setLoadingBtn(false));\n  };\n\n  const createFile = (file) => {\n    return {\n      uid: file.title,\n      name: file.title,\n      status: 'done',\n      url: file.title,\n      created: true,\n    };\n  };\n\n  const handleUpload = ({ file, onSuccess }) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    updateService.upload(formData).then(({ data }) => {\n      dispatch(setMenuData({ activeMenu, data: createFile(data) }));\n      onSuccess('ok');\n    });\n  };\n\n  const beforeUpload = (file) => {\n    const isPNG = file.type === 'image/png';\n    const isJPG = file.type === 'image/jpg';\n    const isJPEG = file.type === 'image/jpeg';\n    if (isPNG || isJPEG || isJPG) {\n      toast.error(`${file.name} is not valid file`);\n      return false;\n    }\n  };\n\n  return (\n    <Card\n      title={t('bookingUpload')}\n      // extra={\n      //   <Button\n      //     type='primary'\n      //     icon={<CloudUploadOutlined />}\n      //     loading={loadingBtn}\n      //     onClick={updateBackend}\n      //   >\n      //     {t('update.booking')}\n      //   </Button>\n      // }\n    >\n      <Dragger\n        name='file'\n        multiple={false}\n        maxCount={1}\n        customRequest={handleUpload}\n        defaultFileList={activeMenu?.data ? [activeMenu?.data] : null}\n        beforeUpload={beforeUpload}\n      >\n        <p className='ant-upload-drag-icon'>\n          <InboxOutlined />\n        </p>\n        <p className='ant-upload-text'>\n          Click or drag file to this area to upload\n        </p>\n        <p className='ant-upload-hint'>\n          To update the booking database using this file, you need to click the\n          above button\n        </p>\n      </Dragger>\n    </Card>\n  );\n}\n"],"names":["upload","data","request","update","BookingFileUpload","loadingBtn","setLoadingBtn","useState","dispatch","useDispatch","t","useTranslation","activeMenu","useSelector","state","menu","shallowEqual","createFile","file","uid","title","name","status","url","created","_jsx","Card","children","_jsxs","Dragger","multiple","maxCount","customRequest","_ref","onSuccess","formData","FormData","append","updateService","then","_ref2","setMenuData","defaultFileList","beforeUpload","isPNG","type","isJPG","isJPEG","toast","className","InboxOutlined"],"sourceRoot":""}