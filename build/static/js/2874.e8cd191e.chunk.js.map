{"version":3,"file":"static/js/2874.e8cd191e.chunk.js","mappings":"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","sources":["components/map-custom-marker.js","helpers/getDefaultLocation.js","helpers/nFormatter.js","helpers/useUserActivity.js","views/deliveriesMap/user-data.js","views/deliveriesMap/user-card.js","views/deliveriesMap/deliveriesMap.js"],"sourcesContent":["import React from 'react';\nimport GoogleMapReact from 'google-map-react';\nimport { shallowEqual, useSelector } from 'react-redux';\nimport { MAP_API_KEY } from '../configs/app-global';\n\nexport default function MapCustomMarker({ center, handleLoadMap, children }) {\n  const { google_map_key } = useSelector(\n    (state) => state.globalSettings.settings,\n    shallowEqual\n  );\n\n  return (\n    <GoogleMapReact\n      bootstrapURLKeys={{\n        key: google_map_key || MAP_API_KEY,\n      }}\n      defaultZoom={12}\n      center={center}\n      options={{\n        fullscreenControl: false,\n      }}\n      yesIWantToUseGoogleMapApiInternals\n      onGoogleApiLoaded={({ map, maps }) => handleLoadMap(map, maps)}\n    >\n      {children}\n    </GoogleMapReact>\n  );\n}\n","import { LAT, LNG } from 'configs/app-global';\n\nexport default function getDefaultLocation(settings) {\n  if (!settings?.location) {\n    return {\n      lat: 47.4143302506288,\n      lng: 8.532059477976883,\n    };\n  }\n  const location = settings.location.split(', ');\n  return {\n    lat: Number(location?.[0]),\n    lng: Number(location?.[1]),\n  };\n}\n","export function nFormatter(num, digits) {\n  const lookup = [\n    { value: 1, symbol: '' },\n    { value: 1e3, symbol: 'k' },\n    { value: 1e6, symbol: 'M' },\n    { value: 1e9, symbol: 'G' },\n    { value: 1e12, symbol: 'T' },\n    { value: 1e15, symbol: 'P' },\n    { value: 1e18, symbol: 'E' },\n  ];\n  const rx = /\\.0+$|(\\.[0-9]*[1-9])0+$/;\n  var item = lookup\n    .slice()\n    .reverse()\n    .find(function (item) {\n      return num >= item.value;\n    });\n  return item\n    ? '$' + (num / item.value).toFixed(digits).replace(rx, '$1') + item.symbol\n    : '0';\n}\n","import moment from 'moment';\nimport { useTranslation } from 'react-i18next';\n\nexport default function useUserActivity(date) {\n  const { t } = useTranslation();\n  let currDate = moment();\n  let dateToTest = moment(date);\n  let hours = currDate.diff(dateToTest, 'hours');\n  let minues = currDate.diff(dateToTest, 'minutes');\n\n  if (hours > 23) {\n    return moment(date).format('Do MMM, H:mm');\n  }\n  if (hours > 0) {\n    return hours + ' ' + t('hours.ago');\n  }\n  return minues + ' ' + t('minutes.ago');\n}\n","import React from 'react';\nimport { CloseOutlined } from '@ant-design/icons';\nimport { Avatar, Col, Rate, Row } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { IMG_URL } from '../../configs/app-global';\nimport { nFormatter } from '../../helpers/nFormatter';\nimport useUserActivity from '../../helpers/useUserActivity';\n\nconst UserData = ({ data, handleClose }) => {\n  const { t } = useTranslation();\n  const lastSeen = useUserActivity(data?.delivery_man_setting?.updated_at);\n  const rate = data?.assign_reviews_avg_rating;\n  const phone = data?.phone;\n  const ordersCount = data?.delivery_man_orders_count;\n  const totalPrice = data?.delivery_man_orders_sum_total_price;\n\n  return (\n    <Row gutter={12} align='middle'>\n      <Col span={7}>\n        <div className='d-flex align-items-center'>\n          <Avatar src={IMG_URL + data?.img} />\n          <div className='ml-2'>\n            <div className='title'>\n              {data?.firstname + ' ' + data?.lastname}\n            </div>\n            <Rate disabled allowHalf value={rate || 0} />\n          </div>\n        </div>\n      </Col>\n      <Col span={4}>\n        <div className='title'>{phone}</div>\n        <div className='label'>{t('phone')}</div>\n      </Col>\n      <Col span={4}>\n        <div className='title'>{lastSeen}</div>\n        <div className='label'>{t('last.activity')}</div>\n      </Col>\n      <Col span={4}>\n        <div className='title'>{ordersCount}</div>\n        <div className='label'>{t('total.orders')}</div>\n      </Col>\n      <Col span={4}>\n        <div className='title'>{nFormatter(totalPrice)}</div>\n        <div className='label'> {t('total.earning')}</div>\n      </Col>\n      <Col span={1}>\n        <button type='button' className='close-btn' onClick={handleClose}>\n          <CloseOutlined />\n        </button>\n      </Col>\n    </Row>\n  );\n};\n\nexport default UserData;\n","import React from 'react';\nimport { Avatar, Card, Space } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigate } from 'react-router-dom';\nimport { IMG_URL } from '../../configs/app-global';\nimport { UserOutlined } from '@ant-design/icons';\nimport useUserActivity from '../../helpers/useUserActivity';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { addMenu, removeFromMenu } from '../../redux/slices/menu';\n\nexport default function UserCard({ data }) {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const { menuItems } = useSelector((state) => state.menu, shallowEqual);\n  const activeOrders = data?.deliveryman_orders || [];\n  const lastSeen = useUserActivity(data?.delivery_man_setting?.updated_at);\n\n  const goToShow = (row) => {\n    const isExist = !!menuItems.find(\n      (item) => item.id === 'delivery_map_orders'\n    );\n    if (isExist) {\n      dispatch(\n        removeFromMenu({\n          id: `delivery_map_orders`,\n          nextUrl: 'deliveries/map',\n        })\n      );\n    }\n    dispatch(\n      addMenu({\n        url: `deliveries/map/${row.id}`,\n        id: `delivery_map_orders`,\n        name: t('delivery.orders'),\n        data: {\n          list: activeOrders,\n          item: activeOrders[0],\n          deliveryman: data,\n        },\n      })\n    );\n    navigate(`/deliveries/map/${row.id}`);\n  };\n\n  return (\n    <Card className='user-card' onClick={() => goToShow(data)}>\n      <Space>\n        <Avatar\n          src={IMG_URL + data?.img}\n          icon={<UserOutlined />}\n          style={{ color: '#1a3353' }}\n        />\n        <div>\n          <h4 className='title'>\n            {data?.firstname} {data?.lastname?.charAt(0)}.\n          </h4>\n          <div\n            className={`last-seen ${\n              data?.delivery_man_setting?.online ? 'online' : 'text-muted'\n            }`}\n          >\n            {data?.delivery_man_setting?.online ? t('online') : lastSeen}\n          </div>\n        </div>\n      </Space>\n      <div className='mt-2' />\n      <Space>\n        <div>{t('active_orders')}:</div>\n        <div>{activeOrders.length}</div>\n      </Space>\n    </Card>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport { Avatar, Card, Col, Row, Select } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport getDefaultLocation from '../../helpers/getDefaultLocation';\nimport { IMG_URL } from '../../configs/app-global';\nimport { fetchDelivery } from '../../redux/slices/deliveries';\nimport { disableRefetch } from '../../redux/slices/menu';\nimport Loading from '../../components/loading';\nimport useDidUpdate from '../../helpers/useDidUpdate';\nimport UserData from './user-data';\nimport UserCard from './user-card';\nimport { UserOutlined } from '@ant-design/icons';\nimport MapCustomMarker from '../../components/map-custom-marker';\n\nconst deliveryType = [\n  { label: 'All', value: 'all', key: 1 },\n  { label: 'Online', value: '1', key: 2 },\n  { label: 'Offline', value: '0', key: 3 },\n];\n\nconst Marker = (props) => (\n  <Avatar\n    src={props.url}\n    icon={<UserOutlined />}\n    style={{ color: '#1a3353' }}\n    onClick={props.onClick}\n  />\n);\n\nexport default function DeliveriesMap() {\n  const { t } = useTranslation();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const dispatch = useDispatch();\n  const [active, setActive] = useState(undefined);\n  const [userData, setUserData] = useState(null);\n  const { settings } = useSelector(\n    (state) => state.globalSettings,\n    shallowEqual\n  );\n  const center = getDefaultLocation(settings);\n  const { delivery, loading } = useSelector(\n    (state) => state.deliveries,\n    shallowEqual\n  );\n\n  useDidUpdate(() => {\n    const params = {\n      page: 1,\n      perPage: 100,\n      online: active === 'all' ? undefined : active,\n      'statuses[0]': 'new',\n      'statuses[1]': 'accepted',\n      'statuses[2]': 'ready',\n      'statuses[3]': 'on_a_way',\n    };\n    dispatch(fetchDelivery(params));\n  }, [active]);\n\n  const handleLoadMap = (map, maps) => {\n    const markers = delivery.map((item) => ({\n      lat: Number(item.delivery_man_setting?.location.latitude || '0'),\n      lng: Number(item.delivery_man_setting?.location.longitude || '0'),\n    }));\n    let bounds = new maps.LatLngBounds();\n    for (var i = 0; i < markers.length; i++) {\n      bounds.extend(markers[i]);\n    }\n    map.fitBounds(bounds);\n  };\n\n  const onMapClick = (e) => {\n    setUserData(e);\n  };\n\n  const onCloseDeliverymanDetails = () => {\n    setUserData(null);\n  };\n\n  useEffect(() => {\n    if (activeMenu?.refetch) {\n      dispatch(\n        fetchDelivery({\n          perPage: 100,\n          'statuses[0]': 'new',\n          'statuses[1]': 'accepted',\n          'statuses[2]': 'ready',\n          'statuses[3]': 'on_a_way',\n        })\n      );\n      dispatch(disableRefetch(activeMenu));\n    }\n  }, [activeMenu?.refetch]);\n\n  return (\n    <Card\n      title={t('deliveries')}\n      className='delivery'\n      extra={\n        <Select\n          options={deliveryType}\n          defaultValue={'all'}\n          loading={loading}\n          onChange={(e) => setActive(e)}\n          style={{ width: '200px' }}\n        />\n      }\n    >\n      {!loading ? (\n        <Row gutter={8}>\n          <Col span={18}>\n            <div\n              className='map-container'\n              style={{ height: '73vh', width: '100%' }}\n            >\n              {!!userData && (\n                <Card className='map-user-card'>\n                  <UserData\n                    data={userData}\n                    handleClose={onCloseDeliverymanDetails}\n                  />\n                </Card>\n              )}\n              <MapCustomMarker center={center} handleLoadMap={handleLoadMap}>\n                {delivery.map((item) => (\n                  <Marker\n                    key={item.id}\n                    lat={Number(\n                      item?.delivery_man_setting?.location?.latitude || '0'\n                    )}\n                    lng={Number(\n                      item?.delivery_man_setting?.location?.longitude || '0'\n                    )}\n                    url={IMG_URL + item.img}\n                    onClick={() => onMapClick(item)}\n                  />\n                ))}\n              </MapCustomMarker>\n            </div>\n          </Col>\n          <Col span={6}>\n            <div className='order-list' style={{ height: '75vh' }}>\n              {delivery.map((item, index) => (\n                <UserCard key={item.id + index} data={item} />\n              ))}\n            </div>\n          </Col>\n        </Row>\n      ) : (\n        <Loading />\n      )}\n    </Card>\n  );\n}\n"],"names":["MapCustomMarker","_ref","center","handleLoadMap","children","google_map_key","useSelector","state","globalSettings","settings","shallowEqual","_jsx","GoogleMapReact","bootstrapURLKeys","key","MAP_API_KEY","defaultZoom","options","fullscreenControl","yesIWantToUseGoogleMapApiInternals","onGoogleApiLoaded","_ref2","map","maps","getDefaultLocation","location","lat","lng","split","Number","nFormatter","num","digits","item","value","symbol","slice","reverse","find","toFixed","replace","useUserActivity","date","t","useTranslation","currDate","moment","dateToTest","hours","diff","minues","format","_data$delivery_man_se","data","handleClose","lastSeen","delivery_man_setting","updated_at","rate","assign_reviews_avg_rating","phone","ordersCount","delivery_man_orders_count","totalPrice","delivery_man_orders_sum_total_price","_jsxs","Row","gutter","align","Col","span","className","Avatar","src","IMG_URL","img","firstname","lastname","Rate","disabled","allowHalf","type","onClick","CloseOutlined","UserCard","_data$lastname","_data$delivery_man_se2","_data$delivery_man_se3","navigate","useNavigate","dispatch","useDispatch","menuItems","menu","activeOrders","deliveryman_orders","Card","row","id","removeFromMenu","nextUrl","addMenu","url","name","list","deliveryman","goToShow","Space","icon","UserOutlined","style","color","charAt","online","length","deliveryType","label","Marker","props","DeliveriesMap","activeMenu","active","setActive","useState","undefined","userData","setUserData","delivery","loading","deliveries","useDidUpdate","params","page","perPage","fetchDelivery","useEffect","refetch","disableRefetch","title","extra","Select","defaultValue","onChange","e","width","Loading","height","UserData","onCloseDeliverymanDetails","markers","_item$delivery_man_se","_item$delivery_man_se2","latitude","longitude","bounds","LatLngBounds","i","extend","fitBounds","_item$delivery_man_se3","_item$delivery_man_se4","_item$delivery_man_se5","_item$delivery_man_se6","index"],"sourceRoot":""}