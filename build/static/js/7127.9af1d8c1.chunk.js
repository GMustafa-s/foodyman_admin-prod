"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[7127],{14367:(e,t,n)=>{n.d(t,{Z:()=>s});var l=n(54080),a=n(58361),o=(n(72791),n(80184));const s=e=>{let{loading:t}=e;return(0,o.jsx)(l.Z,{className:"order-card",children:(0,o.jsx)(a.Z,{loading:t,avatar:!0,active:!0})})}},37720:(e,t,n)=>{n.d(t,{Z:()=>d});var l=n(72791),a=n(86005),o=n(763),s=n(11730),i=n(80184);function d(e){let{handleChange:t,defaultValue:n,resetSearch:d,...r}=e;const[c,u]=(0,l.useState)(n),v=(0,l.useMemo)((()=>(0,o.debounce)((e=>{t(e)}),800)),[t]);return(0,l.useEffect)((()=>{u(n)}),[d,n]),(0,i.jsx)(a.Z,{value:c,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,i.jsx)(s.Z,{}),...r})}},6200:(e,t,n)=>{n.d(t,{h:()=>r});var l=n(72791),a=n(48573),o=n.n(a),s=n(66818),i=n(37083),d=n(80184);const r=e=>{let{fetchOptions:t,debounceTimeout:n=400,onClear:a,...r}=e;const[c,u]=(0,l.useState)(!1),[v,p]=(0,l.useState)([]),h=(0,l.useMemo)((()=>o()((e=>{p([]),u(!0),t(e).then((e=>{p(e),u(!1)}))}),n)),[t,n]);return(0,d.jsx)(s.Z,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,onClear:()=>{h(""),a&&a()},notFoundContent:c?(0,d.jsx)(i.Z,{size:"small"}):"no results",...r,options:v,onFocus:()=>{h("")}})}},70188:(e,t,n)=>{n.d(t,{CM:()=>o,Km:()=>r,OT:()=>i,Q1:()=>l,Sp:()=>d,a5:()=>c,gN:()=>a,qO:()=>s});const l={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},a=["progress","paid","canceled","rejected","refund"],o=["before","after"],s=["blue","red","gold","volcano","cyan","lime"],i=["new","accepted","cooking","ready","ended"],d=["new","accepted","cooking","ready","on_a_way","delivered","canceled"],r=["dine_in","delivery","pickup"],c=["male","female"]},51720:(e,t,n)=>{n.d(t,{Z:()=>l});n(85830);function l(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const t=e.location.split(", ");return{lat:Number(null===t||void 0===t?void 0:t[0]),lng:Number(null===t||void 0===t?void 0:t[1])}}},39366:(e,t,n)=>{n.d(t,{Z:()=>a});var l=n(80470);function a(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;const s=null===(e=l.h.getState())||void 0===e||null===(t=e.currency)||void 0===t?void 0:t.defaultCurrency,i=Number(n).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),d=a||(null===s||void 0===s?void 0:s.symbol)||"$",r=o||(null===s||void 0===s?void 0:s.position)||"before";return"after"===r?`${i} ${d}`:`${d} ${i}`}},53712:(e,t,n)=>{n.d(t,{Z:()=>a});var l=n(46485);const a={orderExport:(e,t)=>l.Z.get(`dashboard/user/export/order/${e}/pdf`,{params:t,responseType:"blob"})}},40770:(e,t,n)=>{n.d(t,{Z:()=>r});var l=n(50881),a=(n(72791),n(39126)),o=n(17425),s=n(16871),i=n(80184);const d=[{value:"seller/orders-board",title:"Board",icon:(0,i.jsx)(o.Ez2,{size:20})},{value:"seller/orders",title:"List",icon:(0,i.jsx)(a.Ps6,{size:20})}],r=e=>{let{listType:t}=e;const{type:n}=(0,s.UO)(),a=(0,s.s0)();return(0,i.jsx)(l.ZP.Group,{value:t,onChange:e=>{a(`/${e.target.value}${n?`/${n}`:""}`)},className:"float-right",buttonStyle:"solid",children:null===d||void 0===d?void 0:d.map((e=>(0,i.jsx)(l.ZP.Button,{value:e.value,children:(0,i.jsxs)("div",{className:"d-flex align-items-center",style:{gap:"10px"},children:[e.icon,e.title]})},e.value)))})}},86973:(e,t,n)=>{n.d(t,{Z:()=>y});var l=n(72791),a=n(77483),o=n(65873),s=n(87309),i=n(66106),d=n(30914),r=n(66818),c=n(79337),u=n(49973),v=n(48030),p=n(33168),h=n(12341),m=n(6200),x=n(91061),f=n(70188),g=n(80184);function y(e){var t,n,y,j;let{orderDetails:Z,handleCancel:b}=e;const{t:C}=(0,p.$)(),{activeMenu:k}=(0,c.v9)((e=>e.menu),c.wU),[w]=a.Z.useForm(),_=(0,c.I0)(),[S,M]=(0,l.useState)(!1),I=f.gN.map((e=>({label:C(e),value:e,key:e})));(0,l.useEffect)((()=>{_((0,h.EH)({}))}),[]);return(0,g.jsx)(o.Z,{visible:!!Z,title:Z.title,onCancel:b,footer:[(0,g.jsx)(s.Z,{type:"primary",onClick:()=>w.submit(),loading:S,children:C("save")}),(0,g.jsx)(s.Z,{type:"default",onClick:b,children:C("cancel")})],children:(0,g.jsx)(a.Z,{form:w,layout:"vertical",onFinish:e=>{var t,n;const l={deliveryman:null===e||void 0===e||null===(t=e.deliveryman)||void 0===t?void 0:t.value,transaction_status:(null===e||void 0===e||null===(n=e.transaction_status)||void 0===n?void 0:n.value)||(null===e||void 0===e?void 0:e.transaction_status)||void 0};M(!0),u.Z.updateDelivery(Z.id,l).then((()=>{b(),_((0,v.xo)(k))})).finally((()=>M(!1)))},initialValues:{deliveryman:{label:null===Z||void 0===Z||null===(t=Z.deliveryman)||void 0===t?void 0:t.firstname,value:null===(n=Z.deliveryman)||void 0===n?void 0:n.id,key:null===(y=Z.deliveryman)||void 0===y?void 0:y.id},transaction_status:null===Z||void 0===Z||null===(j=Z.transaction)||void 0===j?void 0:j.status},children:(0,g.jsxs)(i.Z,{gutter:12,children:[(0,g.jsx)(d.Z,{span:24,children:(0,g.jsx)(a.Z.Item,{label:C("deliveryman"),name:"deliveryman",rules:[{required:!0,message:C("required")}],children:(0,g.jsx)(m.h,{fetchOptions:e=>{var t,n;const l={perPage:10,page:1,search:null!==e&&void 0!==e&&e.length?e:void 0,"address[latitude]":(null===Z||void 0===Z||null===(t=Z.location)||void 0===t?void 0:t.latitude)||void 0,"address[longitude]":(null===Z||void 0===Z||null===(n=Z.location)||void 0===n?void 0:n.longitude)||void 0};return x.Z.getDeliverymans(l).then((e=>e.data.map((e=>({label:null===e||void 0===e?void 0:e.firstname,value:null===e||void 0===e?void 0:e.id})))))}})})}),(null===Z||void 0===Z?void 0:Z.transaction)&&(0,g.jsx)(d.Z,{span:24,children:(0,g.jsx)(a.Z.Item,{label:C("transaction.status"),name:"transaction_status",children:(0,g.jsx)(r.Z,{options:I})})})]})})})}},87127:(e,t,n)=>{n.r(t),n.d(t,{default:()=>be});var l=n(72791),a=n(90894),o=n(83099),s=n(87309),i=n(54080),d=n(65873),r=n(16871),c=n(31549),u=n(12056),v=n(79337),p=n(48030),h=n(33168),m=n(17076),x=n(37720),f=n(6200),g=n(91061),y=n(64667),j=n(52666),Z=n(30577),b=n(49973),C=n(81448),k=n(14482),w=n(73182),_=n(72426),S=n.n(_),M=n(20545),I=n(86973),O=n(38734),D=n(37083),P=n(79335),N=n(77106),T=n(70188),E=n(14367),$=n(29529),H=n(93309),Y=n(43686),z=n(90897),F=n(89331),V=n(61938),L=n(31752),B=n(47944),U=n(24215),K=n(82622),A=n(92365),R=n(58361),q=n(67734),G=n(2126),Q=n(85830),W=n(39366),J=n(7692),X=n(19011),ee=n(80184);const{Meta:te}=i.Z,ne=e=>{var t,n,l,a,s,d,r,c,u,v,p,m;let{data:x,goToShow:f,loading:g,setLocationsMap:y,setId:j,setIsModalVisible:Z,setText:b,setDowloadModal:C,setType:k,orderType:w,setIsTransactionModalOpen:_}=e;const{isDemo:M,demoFunc:I}=(0,X.Z)(),{t:O}=(0,h.$)(),D=(null===(t=x.transactions)||void 0===t?void 0:t.at(-1))||{},P=[{title:"Client",icon:(0,ee.jsx)($.Z,{}),data:null!==x&&void 0!==x&&x.user?`${(null===(n=x.user)||void 0===n?void 0:n.firstname)||"-"} ${(null===(l=x.user)||void 0===l?void 0:l.lastname)||"-"}`:O("deleted.user")},{title:"Number of products",icon:(0,ee.jsx)(H.Z,{}),data:null===x||void 0===x?void 0:x.order_details_count},{title:w?"Table":"Deliveryman",icon:(0,ee.jsx)(Y.Z,{}),data:w?`${(null===x||void 0===x||null===(a=x.table)||void 0===a?void 0:a.name)||"-"}`:`${(null===(s=x.deliveryman)||void 0===s?void 0:s.firstname)||"-"} ${(null===(d=x.deliveryman)||void 0===d?void 0:d.lastname)||"-"}`},{title:"Amount",icon:(0,ee.jsx)(z.Z,{}),data:(0,W.Z)(x.total_price,null===(r=x.currency)||void 0===r?void 0:r.symbol,null===(c=x.currency)||void 0===c?void 0:c.position)},{title:"Last Payment type",icon:(0,ee.jsx)(F.Z,{}),data:(null===D||void 0===D||null===(u=D.payment_system)||void 0===u?void 0:u.tag)||"-"},{title:"Last Payment status",icon:(0,ee.jsx)(V.Z,{}),data:null!==D&&void 0!==D&&D.status?(0,ee.jsxs)("div",{style:{cursor:"pointer"},onClick:e=>{e.stopPropagation(),_(D)},children:[null===D||void 0===D?void 0:D.status," ",(0,ee.jsx)(L.Z,{disabled:null===x||void 0===x?void 0:x.deleted_at})]}):"-"},{title:O("delivery.type"),icon:(0,ee.jsx)(B.Z,{}),data:(null===x||void 0===x?void 0:x.delivery_type)||"-"},{title:"Delivery date",icon:(0,ee.jsx)(B.Z,{}),data:S()(null===x||void 0===x?void 0:x.delivery_date).format("YYYY-MM-DD")||"-"},{title:"Created at",icon:(0,ee.jsx)(B.Z,{}),data:S()(null===x||void 0===x?void 0:x.created_at).format("YYYY-MM-DD")||"-"}];return(0,ee.jsx)(i.Z,{actions:[(0,ee.jsx)(J.Y4r,{size:20,onClick:e=>{e.stopPropagation(),y(x.id)}}),(0,ee.jsx)(U.Z,{onClick:()=>f(x)},"setting"),(0,ee.jsx)(K.Z,{onClick:e=>{M?I():(e.stopPropagation(),j([x.id]),Z(!0),b(!0),k(x.status))}}),(0,ee.jsx)(A.Z,{onClick:()=>C(x.id)},"ellipsis")],className:"order-card",children:(0,ee.jsxs)(R.Z,{loading:g,avatar:!0,active:!0,children:[(0,ee.jsx)(te,{avatar:(0,ee.jsx)(q.C,{src:Q.bV+(null===(v=x.user)||void 0===v?void 0:v.img),icon:(0,ee.jsx)($.Z,{})}),description:`#${x.id}`,title:`${(null===(p=x.user)||void 0===p?void 0:p.firstname)||"-"} ${(null===(m=x.user)||void 0===m?void 0:m.lastname)||"-"}`}),(0,ee.jsx)(G.ZP,{itemLayout:"horizontal",dataSource:P,renderItem:(e,t)=>(0,ee.jsx)(G.ZP.Item,{children:(0,ee.jsxs)(o.Z,{children:[null===e||void 0===e?void 0:e.icon,(0,ee.jsxs)("span",{children:[`${null===e||void 0===e?void 0:e.title}:`,null===e||void 0===e?void 0:e.data]})]})},t)})]})})};var le=n(63446),ae=n(14057),oe=n(90785),se=n(47528);const ie=e=>{let{children:t,title:n,name:l,isDropDisabled:a,total:s=0,loading:i=!1,reloadOrder:d}=e;const{t:r}=(0,h.$)();return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(oe.Z,{message:(0,ee.jsxs)(o.Z,{children:[(0,ee.jsx)(ae.Z,{size:20,style:{cursor:"pointer"},spin:i,onClick:d}),r(n),(0,ee.jsx)(se.Z,{children:i?(0,ee.jsx)(ae.Z,{spin:!0}):s})]}),className:`mb-4 ${l}`,style:{textAlign:"center",fontSize:16,textTransform:"capitalize"}}),(0,ee.jsx)(O.bK,{droppableId:l,isDropDisabled:a,children:e=>(0,ee.jsx)("div",{ref:e.innerRef,className:"h-screen",style:{opacity:a?.6:1},children:(0,ee.jsxs)(ee.Fragment,{children:[t,e.placeholder]})})})]})},de=e=>{let{goToEdit:t,goToShow:n,fetchOrderAllItem:a,fetchOrders:o,setLocationsMap:s,setId:i,setIsModalVisible:d,setText:c,setDowloadModal:u,type:m,setType:x,orderType:f,setIsTransactionModalOpen:g}=e;const{t:y}=(0,h.$)(),j=(0,v.I0)(),k=(0,r.s0)(),{statusList:w,loading:_}=(0,v.v9)((e=>e.orderStatus),v.wU),S=(0,v.v9)((e=>e.globalSettings.settings),v.wU),{items:M}=(0,v.v9)((e=>e.sellerOrders),v.wU),I=(0,v.v9)((e=>e.sellerOrders),v.wU),[$,H]=(0,l.useState)(""),[Y,z]=(0,l.useState)({}),[F,V]=(0,l.useState)({}),L=null===w||void 0===w?void 0:w.map((e=>null===e||void 0===e?void 0:e.name)),B=(e,t)=>{b.Z.updateStatus(e,t).then((t=>{var n;j((0,C.H5)()),a(),"1"===(null===S||void 0===S?void 0:S.auto_print_order)&&"accepted"===(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.status)&&(e=>{const t=`seller/generate-invoice/${e}`;j((0,p.bL)({url:t,id:"seller-generate-invoice ",name:y("generate.invoice")})),k(`/${t}?print=true`)})(e),Z.Am.success(`#${e} ${y("order.status.changed")}`)}))},U=e=>{if(!e.destination)return;e.destination&&Y.source.droppableId!==e.destination.droppableId&&B(e.draggableId,{status:e.destination.droppableId});const t={...M},n=t[e.source.droppableId],[l,a]=((e,t)=>{const n=Array.from(e),[l]=n.splice(t,1);return[l,n]})(n,e.source.index);t[e.source.droppableId]=a;const o=t[e.destination.droppableId];t[e.destination.droppableId]=((e,t,n)=>{const l=Array.from(e);return l.splice(t,0,n),l})(o,e.destination.index,l),j((0,C.U7)(t)),V(null)},K=e=>(0!==e||F!==L.length-1)&&!!Boolean(F>e);(0,l.useEffect)((()=>{j((0,C.H5)()),a()}),[]);return(0,ee.jsx)(ee.Fragment,{children:_?(0,ee.jsx)("div",{children:(0,ee.jsx)(le.Z,{})}):(0,ee.jsx)(O.Z5,{onDragEnd:U,onDragStart:e=>{const t=L.findIndex((t=>t===e.source.droppableId));z(e),V(t)},children:(0,ee.jsx)("div",{className:"order-board",children:null===L||void 0===L?void 0:L.map(((e,l)=>{var a,r,v,p;return(0,ee.jsx)("div",{className:"dnd-column",children:(0,ee.jsx)(ie,{title:e,onDragEnd:U,name:e,isDropDisabled:K(l),total:null===(a=M[e])||void 0===a?void 0:a.length,loading:I[e].loading,reloadOrder:()=>(e=>{j((0,C.x9)(e)),o({status:e})})(e),children:(0,ee.jsxs)(P.ZP,{onScroll:t=>((e,t)=>{const n=e.target.lastChild,l=e.target.clientHeight+e.target.scrollTop;n&&l>n.offsetTop+n.clientHeight+19.9&&I[t].meta.last_page>I[t].meta.current_page&&!I[t].loading&&(H(t),o({page:I[t].meta.current_page+1,perPage:5,status:t}))})(t,e),autoHeight:!0,autoHeightMin:"75vh",autoHeightMax:"75vh",autoHide:!0,id:e,children:[Boolean(I[e].loading&&!(null!==(r=M[e])&&void 0!==r&&r.length))?null===(p=T.Q1[e])||void 0===p?void 0:p.map((()=>(0,ee.jsx)(E.Z,{loading:!0}))):null===(v=M[e])||void 0===v?void 0:v.map(((e,l)=>(0,ee.jsx)(ee.Fragment,{children:(0,ee.jsx)(O._l,{draggableId:e.id.toString(),index:l,children:(l,a)=>(0,ee.jsx)("div",{ref:l.innerRef,...l.draggableProps,...l.dragHandleProps,children:(0,ee.jsx)(ne,{data:e,goToEdit:t,goToShow:n,setLocationsMap:s,setId:i,setIsModalVisible:d,setText:c,setDowloadModal:u,setType:x,orderType:f,setIsTransactionModalOpen:g})})},e.id)}))),I[e].loading&&e===$&&(0,ee.jsx)(D.Z,{indicator:(0,ee.jsx)(N.Z,{style:{fontSize:24},spin:!0})})]})})},e)}))})})})};var re=n(40770),ce=n(92013),ue=n(53712),ve=n(24376),pe=n.n(ve),he=n(66106),me=n(30914),xe=n(39126),fe=n(78820);const ge=i.Z.Meta,ye=e=>{let{id:t,handleCancel:n}=e;const[a,o]=(0,l.useState)(null),{t:c}=(0,h.$)(),u=(0,r.s0)();return(0,ee.jsx)(ee.Fragment,{children:a?(0,ee.jsx)(le.Z,{}):(0,ee.jsx)(d.Z,{visible:!!t,title:c("selected.download"),closable:!1,handleCancel:n,footer:[(0,ee.jsx)(s.Z,{type:"default",onClick:n,children:c("cancel")},"cancelBtn")],children:(0,ee.jsxs)(he.Z,{children:[(0,ee.jsx)(me.Z,{span:12,children:(0,ee.jsx)(i.Z,{title:c("download.pdf"),onClick:()=>function(e){o(!0),ue.Z.orderExport(e).then((t=>{pe()(t,`invoice_${e}.pdf`,"application/pdf"),n()})).finally((()=>o(!1)))}(t),className:"text-center cursor-pointer",children:(0,ee.jsx)(ge,{className:"d-flex align-items-center justify-content-center",title:(0,ee.jsx)(xe._JY,{size:80})})})}),(0,ee.jsx)(me.Z,{span:12,children:(0,ee.jsx)(i.Z,{title:c("download.check"),onClick:()=>(e=>{u(`/seller/generate-invoice/${e}`)})(t),className:"text-center cursor-pointer",children:(0,ee.jsx)(ge,{className:"d-flex align-items-center justify-content-center",title:(0,ee.jsx)(fe.ih9,{size:85})})})})]})})})};var je=n(63713);const{RangePicker:Ze}=a.Z;function be(){var e,t,n;const a=(0,v.I0)(),_=(0,r.s0)(),{t:O}=(0,h.$)(),[D,P]=(0,l.useState)(null),{setIsModalVisible:N}=(0,l.useContext)(j._),[T,E]=(0,l.useState)(null),[$,H]=(0,l.useState)(!1),[Y,z]=(0,l.useState)(null),[F,V]=(0,l.useState)(null),[L,B]=(0,l.useState)(null),[U,K]=(0,l.useState)(null),[A,R]=(0,l.useState)(null),[q,G]=(0,l.useState)(null),{activeMenu:Q}=(0,v.v9)((e=>e.menu),v.wU),W=(0,r.UO)(),J=null===W||void 0===W?void 0:W.type,X=null===Q||void 0===Q?void 0:Q.data,te={search:null!==X&&void 0!==X&&X.search?X.search:void 0,perPage:(null===X||void 0===X?void 0:X.perPage)||5,page:(null===X||void 0===X?void 0:X.page)||1,user_id:null===X||void 0===X?void 0:X.client_id,date_from:(null===q||void 0===q||null===(e=q[0])||void 0===e?void 0:e.format("YYYY-MM-DD"))||void 0,date_to:(null===q||void 0===q||null===(t=q[1])||void 0===t?void 0:t.format("YYYY-MM-DD"))||void 0,delivery_type:J};(0,m.Z)((()=>{a((0,C.H5)()),ae()}),[X,q]),(0,l.useEffect)((()=>{null!==Q&&void 0!==Q&&Q.refetch&&(a((0,M.Aq)(te)),a((0,y.ZL)({})),a((0,p.A_)(Q)))}),[null===Q||void 0===Q?void 0:Q.refetch]);const ne=(e,t)=>{(0,v.dC)((()=>{a((0,C.H5)()),a((0,p.nc)({activeMenu:Q,data:{...X,[t]:e}}))}))};const le=e=>{var t,n,l,o;const s={...e,delivery_type:J,delivery_date_from:"scheduled"===A?S()().add(1,"day").format("YYYY-MM-DD"):void 0,search:null!==X&&void 0!==X&&X.search?X.search:void 0,user_id:null===X||void 0===X?void 0:X.client_id,status:null===e||void 0===e?void 0:e.status,shop_id:null!==(null===(t=Q.data)||void 0===t?void 0:t.shop_id)?null===(n=Q.data)||void 0===n?void 0:n.shop_id:null,date_from:(null===q||void 0===q||null===(l=q[0])||void 0===l?void 0:l.format("YYYY-MM-DD"))||void 0,date_to:(null===q||void 0===q||null===(o=q[1])||void 0===o?void 0:o.format("YYYY-MM-DD"))||void 0};switch(null===e||void 0===e?void 0:e.status){case"new":a((0,C.O7)(s));break;case"accepted":a((0,C.We)(s));break;case"ready":a((0,C.wC)(s));break;case"on_a_way":a((0,C.Ri)(s));break;case"delivered":a((0,C.Rd)(s));break;case"canceled":a((0,C.eV)(s));break;case"cooking":a((0,C.XK)(s));break;default:console.log("Sorry, we are out of")}},ae=()=>{a((0,C.H5)()),le({status:"new"}),le({status:"accepted"}),le({status:"ready"}),le({status:"on_a_way"}),le({status:"delivered"}),le({status:"canceled"}),le({status:"cooking"})},oe=()=>{(0,v.dC)((()=>{a((0,C.H5)()),a((0,p.nc)({activeMenu:Q,data:null}))})),ae()},se=()=>{B(null),z(null),V(null)};return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsxs)(o.Z,{className:"justify-content-end w-100 mb-3",children:[(0,ee.jsx)(re.Z,{listType:"seller/orders-board"}),(0,ee.jsx)(s.Z,{type:"primary",icon:(0,ee.jsx)(c.Z,{}),onClick:()=>{a((0,k.bn)()),a((0,p.bL)({id:"pos.system",url:"seller/pos-system",name:O("add.order")})),_("/seller/pos-system",{state:{delivery_type:J}})},style:{width:"100%"},children:O("add.order")})]}),(0,ee.jsx)(i.Z,{children:(0,ee.jsxs)(o.Z,{wrap:!0,children:[(0,ee.jsx)(x.Z,{placeholder:O("search"),handleChange:e=>ne(e,"search"),defaultValue:null===(n=Q.data)||void 0===n?void 0:n.search,resetSearch:!(null!==X&&void 0!==X&&X.search)}),(0,ee.jsx)(f.h,{placeholder:O("select.client"),fetchOptions:async function(e){const t={search:e,perPage:10};return g.Z.getAll(t).then((e=>{let{data:t}=e;return t.map((e=>({label:`${e.firstname} ${e.lastname||""}`,value:e.id})))}))},onSelect:e=>ne(e.value,"client_id"),onDeselect:()=>ne(null,"client_id"),style:{minWidth:200},onClear:oe,value:null===X||void 0===X?void 0:X.client_id}),(0,ee.jsx)(Ze,{defaultValue:q,onChange:e=>{ne(JSON.stringify(e),"data_time"),G(e)},allowClear:!0,style:{width:"100%"},onClear:()=>{a((0,C.H5)()),G(null)}}),(0,ee.jsx)(s.Z,{icon:(0,ee.jsx)(u.Z,{}),onClick:oe,children:O("clear")})]})}),(0,ee.jsx)(de,{goToShow:e=>{a((0,p.bL)({url:`seller/order/details/${e.id}`,id:"order_details",name:O("order.details")})),_(`/seller/order/details/${e.id}`)},fetchOrderAllItem:ae,fetchOrders:le,setLocationsMap:z,setId:P,setIsModalVisible:N,setText:E,setDowloadModal:V,type:A,setType:R,orderType:J,setIsTransactionModalOpen:K}),(0,ee.jsx)(w.Z,{click:()=>{H(!0);const e={...Object.assign({},...D.map(((e,t)=>({[`ids[${t}]`]:e}))))};b.Z.delete(e).then((()=>{a((0,C.H5)()),Z.Am.success(O("successfully.deleted")),N(!1),ae({status:A}),E(null)})).finally((()=>{P(null),H(!1)}))},text:O(T?"delete":"all.delete"),loading:$,setText:P,setActive:P}),L&&(0,ee.jsx)(I.Z,{orderDetails:L,handleCancel:se}),!!U&&(0,ee.jsx)(d.Z,{visible:!!U,footer:!1,onCancel:()=>K(null),children:(0,ee.jsx)(je.Z,{data:U,onCancel:()=>K(null),refreshOrders:ae})}),Y&&(0,ee.jsx)(ce.Z,{id:Y,handleCancel:se}),F&&(0,ee.jsx)(ye,{id:F,handleCancel:se})]})}},92013:(e,t,n)=>{n.d(t,{Z:()=>O});var l=n(2040),a=n(9109),o=n(65873),s=n(87309),i=n(54080),d=n(66106),r=n(30914),c=n(47528),u=n(72791),v=n(33168),p=n(49973),h=n(63446),m=n(39126),x=n(79337),f=n(85830),g=n(18478),y=n(84618),j=n(51720),Z=n(86533),b=n(16856),C=n(40071),k=n(78820),w=n(80184);const{Step:_}=a.Z,S=()=>(0,w.jsx)("img",{src:g,width:"50",alt:"Pin"}),M=()=>(0,w.jsx)("img",{src:y,width:"50",alt:"Pin"}),I=["blue","red","gold","volcano","cyan","lime"],O=e=>{var t,n,g,y,O,D;let{id:P,handleCancel:N}=e;const{t:T}=(0,v.$)(),[E,$]=(0,u.useState)(null),[H,Y]=(0,u.useState)(null),[z,F]=(0,u.useState)(null),{settings:V}=(0,x.v9)((e=>e.globalSettings),x.wU),L=(0,j.Z)(V),[B,U]=(0,u.useState)(0),[K,A]=(0,u.useState)((0,j.Z)(V)),[R,q]=(0,u.useState)((0,j.Z)(V)),[G,Q]=(0,u.useState)([{id:0,name:"new",icon:(0,w.jsx)(Z.Z,{})},{id:1,name:"accepted",icon:(0,w.jsx)(m.IQF,{})},{id:2,name:"ready",icon:(0,w.jsx)(b.TkG,{})},{id:3,name:"on_a_way",icon:(0,w.jsx)(C.Akc,{})},{id:4,name:"delivered",icon:(0,w.jsx)(C.kme,{})}]);const{google_map_key:W}=(0,x.v9)((e=>e.globalSettings.settings),x.wU);(0,u.useEffect)((()=>{$(!0),p.Z.getById(P).then((e=>{var t;let{data:n}=e;Q("canceled"===n.status?[{id:1,name:"new",icon:(0,w.jsx)(Z.Z,{})},{id:5,name:"canceled",icon:(0,w.jsx)(k.SV5,{})}]:G),U("canceled"===n.status?1:null===(t=G.find((e=>e.name===n.status)))||void 0===t?void 0:t.id),F("canceled"===n.status?"error":"success"),Y(n),q({lat:n.location.latitude,lng:n.location.longitude}),A({lat:n.shop.location.latitude,lng:n.shop.location.longitude})})).finally((()=>{$(!1)}))}),[]);return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(o.Z,{visible:!!P,title:T("show.locations"),closable:!0,onCancel:N,style:{minWidth:"80vw"},footer:[(0,w.jsx)(s.Z,{type:"default",onClick:N,children:T("cancel")},"cancelBtn")],children:E?(0,w.jsx)(h.Z,{}):(0,w.jsxs)(i.Z,{children:[(0,w.jsx)(a.Z,{current:B,status:z,className:"mb-5",children:null===G||void 0===G?void 0:G.map(((e,t)=>(0,w.jsx)(_,{title:T(e.name),icon:null===e||void 0===e?void 0:e.icon},e.id+t)))}),(0,w.jsxs)(d.Z,{gutter:12,children:[(0,w.jsxs)(r.Z,{span:12,children:[(0,w.jsxs)("h3",{children:[T("order.id")," #",null===H||void 0===H?void 0:H.id]}),(0,w.jsxs)("p",{children:[(0,w.jsx)(m.D73,{})," ",null===H||void 0===H?void 0:H.created_at]}),(0,w.jsxs)("p",{children:[T("schedulet.at")," ",null===H||void 0===H?void 0:H.delivery_date]}),(0,w.jsxs)("span",{children:[(0,w.jsx)("strong",{children:null===H||void 0===H||null===(t=H.shop)||void 0===t||null===(n=t.translation)||void 0===n?void 0:n.title})," ",null===H||void 0===H||null===(g=H.details)||void 0===g?void 0:g.map(((e,t)=>{var n;return(0,w.jsx)(c.Z,{className:"mb-2",color:I[t],children:null===e||void 0===e||null===(n=e.stock)||void 0===n?void 0:n.product.translation.title})}))]})]}),(0,w.jsxs)(r.Z,{span:12,children:[(0,w.jsxs)("p",{children:[T("status")," ","new"===(null===H||void 0===H?void 0:H.status)?(0,w.jsx)(c.Z,{color:"blue",children:T(null===H||void 0===H?void 0:H.status)}):"canceled"===(null===H||void 0===H?void 0:H.status)?(0,w.jsx)(c.Z,{color:"error",children:T(null===H||void 0===H?void 0:H.status)}):(0,w.jsx)(c.Z,{color:"cyan",children:T(null===H||void 0===H?void 0:H.status)})]}),(0,w.jsxs)("p",{children:[T("payment.method")," ",(0,w.jsx)("strong",{children:null===H||void 0===H||null===(y=H.transaction)||void 0===y||null===(O=y.payment_system)||void 0===O?void 0:O.tag})]}),(0,w.jsxs)("p",{children:[T("order.type")," ",(0,w.jsx)("strong",{children:null===H||void 0===H?void 0:H.delivery_type})]}),(0,w.jsxs)("p",{children:[T("payment.type")," ",(0,w.jsx)("strong",{children:null===H||void 0===H||null===(D=H.transaction)||void 0===D?void 0:D.status})]})]}),(0,w.jsxs)(r.Z,{span:24,className:"mt-5",children:[(0,w.jsx)("h4",{children:T("map")}),(0,w.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,w.jsxs)(l.ZP,{bootstrapURLKeys:{key:f.kr||W},defaultZoom:15,center:L,yesIWantToUseGoogleMapApiInternals:!0,options:{fullscreenControl:!1},onGoogleApiLoaded:e=>{let{map:t,maps:n}=e;const l=[K,R].map((e=>({lat:Number(e.lat||"0"),lng:Number(e.lng||"0")})));let a=new n.LatLngBounds;for(var o=0;o<l.length;o++)a.extend(l[o]);t.fitBounds(a)},children:[(0,w.jsx)(M,{lat:null===K||void 0===K?void 0:K.lat,lng:null===K||void 0===K?void 0:K.lng}),(0,w.jsx)(S,{lat:null===R||void 0===R?void 0:R.lat,lng:null===R||void 0===R?void 0:R.lng})]})})]})]})]})})})}},63713:(e,t,n)=>{n.d(t,{Z:()=>f});var l=n(77483),a=n(66106),o=n(30914),s=n(66818),i=n(91333),d=n(83099),r=n(87309),c=n(33168),u=n(70188),v=n(72791),p=n(49973),h=n(79337),m=n(48030),x=n(80184);const f=e=>{let{data:t,onCancel:n,refreshOrders:f}=e;const[g]=l.Z.useForm(),{t:y}=(0,c.$)(),j=(0,h.I0)(),{activeMenu:Z}=(0,h.v9)((e=>e.menu),h.wU),[b,C]=(0,v.useState)(!1),k=u.gN.map((e=>({label:y(e),value:e,key:e})));return(0,x.jsx)(l.Z,{form:g,layout:"vertical",initialValues:{status:t.status},onFinish:e=>{var l;const a={status:null===e||void 0===e||null===(l=e.status)||void 0===l?void 0:l.value,transaction_id:t.id};C(!0),p.Z.updateTransactionStatus(t.payable_id,a).finally((()=>{C(!1),n(),f?f():j((0,m.xo)(Z))}))},children:(0,x.jsxs)(a.Z,{gutter:12,children:[(0,x.jsx)(o.Z,{span:24,children:(0,x.jsx)(l.Z.Item,{label:y("status"),name:"status",rules:[{required:!0,message:y("required")}],children:(0,x.jsx)(s.Z,{options:k,labelInValue:!0})})}),(0,x.jsx)(i.Z,{}),(0,x.jsx)(o.Z,{span:24,children:(0,x.jsxs)(d.Z,{style:{display:"flex",justifyContent:"end"},children:[(0,x.jsx)(r.Z,{onClick:n,children:y("cancel")}),(0,x.jsx)(r.Z,{type:"primary",htmlType:"submit",loading:b,children:y("save")})]})})]})})}},61938:(e,t,n)=>{n.d(t,{Z:()=>d});var l=n(1413),a=n(72791);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M117 368h231v64H117zm559 0h241v64H676zm-264 0h200v64H412zm0 224h200v64H412zm264 0h241v64H676zm-559 0h231v64H117zm295-160V179h-64v666h64V592zm264-64V179h-64v666h64V432z"}}]},name:"borderless-table",theme:"outlined"};var s=n(54291),i=function(e,t){return a.createElement(s.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t,icon:o}))};i.displayName="BorderlessTableOutlined";const d=a.forwardRef(i)},93309:(e,t,n)=>{n.d(t,{Z:()=>d});var l=n(1413),a=n(72791);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-40 824H232V687h97.9c11.6 32.8 32 62.3 59.1 84.7 34.5 28.5 78.2 44.3 123 44.3s88.5-15.7 123-44.3c27.1-22.4 47.5-51.9 59.1-84.7H792v-63H643.6l-5.2 24.7C626.4 708.5 573.2 752 512 752s-114.4-43.5-126.5-103.3l-5.2-24.7H232V136h560v752zM320 341h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 160h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"container",theme:"outlined"};var s=n(54291),i=function(e,t){return a.createElement(s.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t,icon:o}))};i.displayName="ContainerOutlined";const d=a.forwardRef(i)},31549:(e,t,n)=>{n.d(t,{Z:()=>d});var l=n(1413),a=n(72791);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var s=n(54291),i=function(e,t){return a.createElement(s.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t,icon:o}))};i.displayName="PlusCircleOutlined";const d=a.forwardRef(i)},50881:(e,t,n)=>{n.d(t,{ZP:()=>D});var l=n(4942),a=n(87462),o=n(72791),s=n(28083),i=n(81694),d=n.n(i),r=n(88834),c=n(91940),u=n(69077),v=o.createContext(null),p=v.Provider;const h=v;var m=o.createContext(null),x=m.Provider,f=function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(l=Object.getOwnPropertySymbols(e);a<l.length;a++)t.indexOf(l[a])<0&&Object.prototype.propertyIsEnumerable.call(e,l[a])&&(n[l[a]]=e[l[a]])}return n},g=function(e,t){var n,i=o.useContext(h),v=o.useContext(m),p=o.useContext(u.E_),x=p.getPrefixCls,g=p.direction,y=o.useRef(),j=(0,r.sQ)(t,y),Z=(0,o.useContext)(c.aM).isFormItemInput,b=e.prefixCls,C=e.className,k=e.children,w=e.style,_=f(e,["prefixCls","className","children","style"]),S=x("radio",b),M="button"===((null===i||void 0===i?void 0:i.optionType)||v)?"".concat(S,"-button"):S,I=(0,a.Z)({},_);i&&(I.name=i.name,I.onChange=function(t){var n,l;null===(n=e.onChange)||void 0===n||n.call(e,t),null===(l=null===i||void 0===i?void 0:i.onChange)||void 0===l||l.call(i,t)},I.checked=e.value===i.value,I.disabled=e.disabled||i.disabled);var O=d()("".concat(M,"-wrapper"),(n={},(0,l.Z)(n,"".concat(M,"-wrapper-checked"),I.checked),(0,l.Z)(n,"".concat(M,"-wrapper-disabled"),I.disabled),(0,l.Z)(n,"".concat(M,"-wrapper-rtl"),"rtl"===g),(0,l.Z)(n,"".concat(M,"-wrapper-in-form-item"),Z),n),C);return o.createElement("label",{className:O,style:w,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},o.createElement(s.Z,(0,a.Z)({},I,{type:"radio",prefixCls:M,ref:j})),void 0!==k?o.createElement("span",null,k):null)},y=o.forwardRef(g);y.displayName="Radio";const j=y;var Z=n(29439),b=n(75179),C=n(1815),k=n(69019),w=o.forwardRef((function(e,t){var n=o.useContext(u.E_),s=n.getPrefixCls,i=n.direction,r=o.useContext(C.Z),c=(0,b.Z)(e.defaultValue,{value:e.value}),v=(0,Z.Z)(c,2),h=v[0],m=v[1];return o.createElement(p,{value:{onChange:function(t){var n=h,l=t.target.value;"value"in e||m(l);var a=e.onChange;a&&l!==n&&a(t)},value:h,disabled:e.disabled,name:e.name,optionType:e.optionType}},function(){var n,c=e.prefixCls,u=e.className,v=void 0===u?"":u,p=e.options,m=e.buttonStyle,x=void 0===m?"outline":m,f=e.disabled,g=e.children,y=e.size,Z=e.style,b=e.id,C=e.onMouseEnter,w=e.onMouseLeave,_=s("radio",c),S="".concat(_,"-group"),M=g;p&&p.length>0&&(M=p.map((function(e){return"string"===typeof e||"number"===typeof e?o.createElement(j,{key:e.toString(),prefixCls:_,disabled:f,value:e,checked:h===e},e):o.createElement(j,{key:"radio-group-value-options-".concat(e.value),prefixCls:_,disabled:e.disabled||f,value:e.value,checked:h===e.value,style:e.style},e.label)})));var I=y||r,O=d()(S,"".concat(S,"-").concat(x),(n={},(0,l.Z)(n,"".concat(S,"-").concat(I),I),(0,l.Z)(n,"".concat(S,"-rtl"),"rtl"===i),n),v);return o.createElement("div",(0,a.Z)({},(0,k.Z)(e),{className:O,style:Z,onMouseEnter:C,onMouseLeave:w,id:b,ref:t}),M)}())}));const _=o.memo(w);var S=function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(l=Object.getOwnPropertySymbols(e);a<l.length;a++)t.indexOf(l[a])<0&&Object.prototype.propertyIsEnumerable.call(e,l[a])&&(n[l[a]]=e[l[a]])}return n},M=function(e,t){var n=o.useContext(u.E_).getPrefixCls,l=e.prefixCls,s=S(e,["prefixCls"]),i=n("radio",l);return o.createElement(x,{value:"button"},o.createElement(j,(0,a.Z)({prefixCls:i},s,{type:"radio",ref:t})))};const I=o.forwardRef(M);var O=j;O.Button=I,O.Group=_;const D=O},28083:(e,t,n)=>{n.d(t,{Z:()=>m});var l=n(87462),a=n(4942),o=n(45987),s=n(1413),i=n(15671),d=n(43144),r=n(60136),c=n(54062),u=n(72791),v=n(81694),p=n.n(v),h=function(e){(0,r.Z)(n,e);var t=(0,c.Z)(n);function n(e){var l;(0,i.Z)(this,n),(l=t.call(this,e)).handleChange=function(e){var t=l.props,n=t.disabled,a=t.onChange;n||("checked"in l.props||l.setState({checked:e.target.checked}),a&&a({target:(0,s.Z)((0,s.Z)({},l.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},l.saveInput=function(e){l.input=e};var a="checked"in e?e.checked:e.defaultChecked;return l.state={checked:a},l}return(0,d.Z)(n,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,s=t.className,i=t.style,d=t.name,r=t.id,c=t.type,v=t.disabled,h=t.readOnly,m=t.tabIndex,x=t.onClick,f=t.onFocus,g=t.onBlur,y=t.onKeyDown,j=t.onKeyPress,Z=t.onKeyUp,b=t.autoFocus,C=t.value,k=t.required,w=(0,o.Z)(t,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),_=Object.keys(w).reduce((function(e,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(e[t]=w[t]),e}),{}),S=this.state.checked,M=p()(n,s,(e={},(0,a.Z)(e,"".concat(n,"-checked"),S),(0,a.Z)(e,"".concat(n,"-disabled"),v),e));return u.createElement("span",{className:M,style:i},u.createElement("input",(0,l.Z)({name:d,id:r,type:c,required:k,readOnly:h,disabled:v,tabIndex:m,className:"".concat(n,"-input"),checked:!!S,onClick:x,onFocus:f,onBlur:g,onKeyUp:Z,onKeyDown:y,onKeyPress:j,onChange:this.handleChange,autoFocus:b,ref:this.saveInput,value:C},_)),u.createElement("span",{className:"".concat(n,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"checked"in e?(0,s.Z)((0,s.Z)({},t),{},{checked:e.checked}):null}}]),n}(u.Component);h.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}};const m=h},84618:(e,t,n)=>{e.exports=n.p+"static/media/shop.46d7a94ca800c711764a.png"},18478:(e,t,n)=>{e.exports=n.p+"static/media/user.fbe7078c52acde79652d.jpg"}}]);
//# sourceMappingURL=7127.9af1d8c1.chunk.js.map