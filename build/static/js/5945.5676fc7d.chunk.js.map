{"version":3,"file":"static/js/5945.5676fc7d.chunk.js","mappings":"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","sources":["views/restaurant/restaurant-clone.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport LanguageList from '../../components/language-list';\nimport { useTranslation } from 'react-i18next';\nimport { steps } from './steps';\nimport { Card, Steps } from 'antd';\nimport UserEdit from './user';\nimport { useQueryParams } from '../../helpers/useQueryParams';\nimport { disableRefetch, setMenuData } from '../../redux/slices/menu';\nimport restaurantService from '../../services/restaurant';\nimport { useParams } from 'react-router-dom';\nimport { IMG_URL } from '../../configs/app-global';\nimport Loading from '../../components/loading';\nimport RestaurantMain from './main';\nimport RestaurantDelivery from './restaurantDelivery';\nimport Map from '../../components/shop/map';\nconst { Step } = Steps;\n\nconst RestaurantClone = () => {\n  const { t } = useTranslation();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const queryParams = useQueryParams();\n  const current = Number(queryParams.values?.step || 0);\n  const [loading, setLoading] = useState(activeMenu.refetch);\n  const dispatch = useDispatch();\n  const { uuid } = useParams();\n  const { languages } = useSelector((state) => state.formLang, shallowEqual);\n\n  const next = () => {\n    const step = current + 1;\n    queryParams.set('step', step);\n  };\n  const prev = () => {\n    const step = current - 1;\n    queryParams.set('step', step);\n  };\n\n  const onChange = (step) => {\n    dispatch(setMenuData({ activeMenu, data: { ...activeMenu.data, step } }));\n    queryParams.set('step', step);\n  };\n\n  const fetchRestaurant = (uuid) => {\n    setLoading(true);\n    restaurantService\n      .getById(uuid)\n      .then((res) => {\n        const data = {\n          ...res.data,\n          ...getLanguageFields(res.data),\n          logo_img: createImages(res.data.logo_img),\n          background_img: createImages(res.data.background_img),\n          user: '',\n          delivery_time_from: res.data?.delivery_time.from,\n          delivery_time_to: res.data?.delivery_time.to,\n          delivery_time_type: res.data?.delivery_time.type,\n          recommended: res.data.mark === 'recommended',\n          categories: res.data?.categories.map((item) => ({\n            label: item?.translation?.title,\n            value: item.id,\n            key: item.id,\n          })),\n          tags: res.data?.tags.map((item) => ({\n            label: item?.translation?.title,\n            value: item.id,\n            key: item.id,\n          })),\n        };\n        dispatch(setMenuData({ activeMenu, data }));\n      })\n      .finally(() => {\n        setLoading(false);\n        dispatch(disableRefetch(activeMenu));\n      });\n  };\n\n  const createImages = (items) => {\n    return {\n      items,\n      uid: items,\n      url: IMG_URL + items,\n      name: items,\n    };\n  };\n\n  function getLanguageFields(data) {\n    if (!data?.translations) {\n      return {};\n    }\n    const { translations } = data;\n    const result = languages.map((item) => ({\n      [`title[${item.locale}]`]: translations.find(\n        (el) => el.locale === item.locale\n      )?.title,\n      [`description[${item.locale}]`]: translations.find(\n        (el) => el.locale === item.locale\n      )?.description,\n      [`address[${item.locale}]`]: translations.find(\n        (el) => el.locale === item.locale\n      )?.address,\n    }));\n    return Object.assign({}, ...result);\n  }\n\n  useEffect(() => {\n    if (activeMenu.refetch && uuid) {\n      fetchRestaurant(uuid);\n    }\n  }, [activeMenu.refetch]);\n\n  return (\n    <Card title={t('restaurant.clone')} extra={<LanguageList />}>\n      <Steps current={current} onChange={onChange}>\n        {steps.map((item) => (\n          <Step title={t(item.title)} key={item.title} />\n        ))}\n      </Steps>\n      {!loading ? (\n        <div className='steps-content'>\n          {steps[current].content === 'First-content' && (\n            <RestaurantMain next={next} loading={loading} user={false} />\n          )}\n\n          {steps[current].content === 'Second-content' && (\n            <Map next={next} prev={prev} />\n          )}\n\n          {steps[current].content === 'Third-content' && (\n            <RestaurantDelivery next={next} prev={prev} />\n          )}\n\n          {steps[current].content === 'Four-content' && (\n            <UserEdit next={next} prev={prev} />\n          )}\n        </div>\n      ) : (\n        <Loading />\n      )}\n    </Card>\n  );\n};\nexport default RestaurantClone;\n"],"names":["Step","Steps","RestaurantClone","_queryParams$values","t","useTranslation","activeMenu","useSelector","state","menu","shallowEqual","queryParams","useQueryParams","current","Number","values","step","loading","setLoading","useState","refetch","dispatch","useDispatch","uuid","useParams","languages","formLang","next","set","prev","createImages","items","uid","url","IMG_URL","name","getLanguageFields","data","translations","result","map","item","_translations$find","_translations$find2","_translations$find3","locale","find","el","title","description","address","Object","assign","useEffect","restaurantService","then","res","_res$data","_res$data2","_res$data3","_res$data4","_res$data5","logo_img","background_img","user","delivery_time_from","delivery_time","from","delivery_time_to","to","delivery_time_type","type","recommended","mark","categories","_item$translation","label","translation","value","id","key","tags","_item$translation2","setMenuData","finally","disableRefetch","fetchRestaurant","_jsxs","Card","extra","_jsx","LanguageList","children","onChange","steps","Loading","className","content","RestaurantMain","Map","RestaurantDelivery","UserEdit"],"sourceRoot":""}