{"version":3,"file":"static/js/8268.807dd469.chunk.js","mappings":"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","sources":["views/career/career-edit.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Card, Form, Spin } from 'antd';\nimport { toast } from 'react-toastify';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport LanguageList from '../../components/language-list';\nimport { batch, shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport {\n  disableRefetch,\n  removeFromMenu,\n  setMenuData,\n} from '../../redux/slices/menu';\nimport careerService from '../../services/career';\nimport { useTranslation } from 'react-i18next';\nimport { fetchCareer } from '../../redux/slices/career';\nimport getTranslationFields from 'helpers/getTranslationFields';\nimport CareerForm from './career-form';\n\nconst CareerEdit = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n\n  const [loading, setLoading] = useState(false);\n  const [form] = Form.useForm();\n  const { id } = useParams();\n  const { languages } = useSelector((state) => state.formLang, shallowEqual);\n\n  useEffect(() => {\n    return () => {\n      const data = form.getFieldsValue(true);\n      dispatch(setMenuData({ activeMenu, data }));\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  function getLanguageFields(data) {\n    if (!data) {\n      return {};\n    }\n    const { translations } = data;\n    const result = languages.map((item) => ({\n      [`title[${item.locale}]`]: translations.find(\n        (el) => el.locale === item.locale,\n      )?.title,\n      [`description[${item.locale}]`]: translations.find(\n        (el) => el.locale === item.locale,\n      )?.description,\n      [`address[${item.locale}]`]: translations.find(\n        (el) => el.locale === item.locale,\n      )?.address,\n    }));\n    return Object.assign({}, ...result);\n  }\n\n  const getCategory = (alias) => {\n    setLoading(true);\n    careerService\n      .getById(alias)\n      .then((res) => {\n        let career = res.data;\n        const body = {\n          ...career,\n          ...getLanguageFields(career),\n          category_id: {\n            label: career?.category?.translation?.title,\n            value: career?.category?.id,\n          },\n          active: res?.data?.active ? res?.data?.active : false,\n        };\n        form.setFieldsValue(body);\n        dispatch(setMenuData({ activeMenu, data: body }));\n      })\n      .finally(() => {\n        setLoading(false);\n        dispatch(disableRefetch(activeMenu));\n      });\n  };\n\n  const handleSubmit = (values) => {\n    const body = {\n      ...values,\n      active: Number(values.active),\n      category_id: values.category_id.value,\n      type: values.type,\n      title: getTranslationFields(languages, values, 'title'),\n      description: getTranslationFields(languages, values, 'description'),\n      address: getTranslationFields(languages, values, 'address'),\n    };\n    const nextUrl = 'catalog/career';\n    return careerService\n      .update(id, body)\n      .then(() => {\n        toast.success(t('successfully.updated'));\n        batch(() => {\n          dispatch(removeFromMenu({ ...activeMenu, nextUrl }));\n          dispatch(fetchCareer({}));\n        });\n        navigate(`/${nextUrl}`);\n      })\n      .catch((err) => console.error(err.response.data.params));\n  };\n\n  useEffect(() => {\n    if (activeMenu.refetch) getCategory(id);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [activeMenu.refetch]);\n\n  return (\n    <Card title={t('edit.career')} extra={<LanguageList />}>\n      {!loading ? (\n        <CareerForm form={form} handleSubmit={handleSubmit} />\n      ) : (\n        <div className='d-flex justify-content-center align-items-center py-5'>\n          <Spin size='large' className='mt-5 pt-5' />\n        </div>\n      )}\n    </Card>\n  );\n};\nexport default CareerEdit;\n"],"names":["CareerEdit","t","useTranslation","navigate","useNavigate","dispatch","useDispatch","activeMenu","useSelector","state","menu","shallowEqual","loading","setLoading","useState","form","Form","id","useParams","languages","formLang","getLanguageFields","data","translations","result","map","item","_translations$find","_translations$find2","_translations$find3","locale","find","el","title","description","address","Object","assign","useEffect","getFieldsValue","setMenuData","alias","refetch","careerService","then","res","_career$category","_career$category$tran","_career$category2","_res$data","_res$data2","career","body","category_id","label","category","translation","value","active","setFieldsValue","finally","disableRefetch","_jsx","Card","extra","LanguageList","children","className","Spin","size","CareerForm","handleSubmit","values","Number","type","getTranslationFields","nextUrl","toast","batch","removeFromMenu","fetchCareer","catch","err","console","error","response","params"],"sourceRoot":""}