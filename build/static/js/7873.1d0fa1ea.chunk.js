"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[7873],{71819:(e,l,t)=>{t.d(l,{Z:()=>a});t(72791);const a=t.p+"static/media/paystack.6d6a77c8d6bfc75061ec651e5c2e74eb.svg"},39366:(e,l,t)=>{t.d(l,{Z:()=>n});var a=t(80470);function n(){var e,l;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;const d=null===(e=a.h.getState())||void 0===e||null===(l=e.currency)||void 0===l?void 0:l.defaultCurrency,s=Number(t).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),r=n||(null===d||void 0===d?void 0:d.symbol)||"$",o=i||(null===d||void 0===d?void 0:d.position)||"before";return"after"===o?`${s} ${r}`:`${r} ${s}`}},47873:(e,l,t)=>{t.r(l),t.d(l,{default:()=>F});var a=t(47528),n=t(54080),i=t(87309),d=t(87407),s=t(95332),r=t(39366),o=t(72426),c=t.n(o),u=t(72791),p=t(33168),v=t(79337),h=t(48030),m=t(28748),y=t(77483),x=t(65873),b=t(66106),f=t(30914),g=t(38243),j=t(7622),Z=t(63446),w=t(30577),k=t(71819),S=t(56355),C=t(60978),I=t(78820),$=t(61e3),U=t(74164),_=t(80184);function z(e){var l,t,a;let{open:d,handleCancel:s,refetch:r}=e;const{t:o}=(0,p.$)(),c=(0,v.I0)(),{payments:h,loading:m}=(0,v.v9)((e=>e.payment),v.wU),{myShop:z}=(0,v.v9)((e=>e.myShop),v.wU),[F,N]=(0,u.useState)(!1),[A,Y]=(0,u.useState)({}),[D,M]=(0,u.useState)(null),[q,E]=(0,u.useState)(null),{payment_type:T}=(0,v.v9)((e=>e.globalSettings.settings),v.wU),[B]=y.Z.useForm();(0,u.useEffect)((()=>{h.length||c((0,j.dA)()),async function(){await $.Z.getById(z.id).then((e=>{let{data:l}=e;return M(l.map((e=>({label:e.payment.tag||"no name",value:e.payment.id,key:e.payment.id}))))}))}(),async function(){$.Z.getAll().then((e=>{let{data:l}=e;return E(l.map((e=>({label:e.tag||"no name",value:e.id,key:e.id}))))}))}()}),[]);const K=e=>{switch(e){case"wallet":return(0,_.jsx)(I.dk2,{size:80});case"paypal":return(0,_.jsx)(S.kD0,{size:80});case"stripe":return(0,_.jsx)(C.K6C,{size:80});case"razorpay":return(0,_.jsx)(C.r98,{size:80});case"paystack":return(0,_.jsx)("img",{src:k.Z,alt:"img",width:"80",height:"80"})}};return(0,_.jsx)(x.Z,{visible:d,title:o("wallet.topup"),onCancel:s,footer:[(0,_.jsx)(i.Z,{type:"primary",disabled:m,htmlType:"submit",form:"payment",loading:F,children:o("save")},"save-btn"),(0,_.jsx)(i.Z,{type:"default",onClick:s,children:o("cancel")},"cancel-btn")],children:m?(0,_.jsx)(Z.Z,{}):(0,_.jsx)(y.Z,{layout:"vertical",id:"payment",onFinish:e=>{A.value?(N(!0),U.Z.topUp({payment_type:A.label,price:e.price}).then((e=>{let{data:l}=e;B.resetFields(),Y({}),s(),r(),window.open(l.data.url)})).finally((()=>N(!1)))):w.Am.warning(o("please.select.payment.type"))},children:(0,_.jsxs)(b.Z,{gutter:12,children:[(0,_.jsx)(f.Z,{span:24,children:(0,_.jsx)(y.Z.Item,{name:"price",label:o("price"),rules:[{required:!0,message:o("required")},{type:"number",min:0,message:o("should.be.greater.than.0")}],children:(0,_.jsx)(g.Z,{className:"w-100"})})}),null===(l="admin"===T?q:D)||void 0===l||null===(t=l.filter((e=>"cash"!==(null===e||void 0===e?void 0:e.label))))||void 0===t||null===(a=t.filter((e=>"wallet"!==(null===e||void 0===e?void 0:e.label))))||void 0===a?void 0:a.map(((e,l)=>(0,_.jsx)(f.Z,{span:8,children:(0,_.jsxs)(n.Z,{className:"payment-card "+((null===A||void 0===A?void 0:A.label)===e.label?"active":""),onClick:()=>{Y(e)},children:[(0,_.jsx)("div",{className:"payment-icon",children:K(null===e||void 0===e?void 0:e.label)}),(0,_.jsx)("div",{className:"font-weight-bold mt-2",children:o(null===e||void 0===e?void 0:e.label)})]})},l)))]})})})}const F=()=>{var e;const[l,t]=(0,u.useState)(null),{t:o}=(0,p.$)(),y=(0,v.I0)(),[x,b]=(0,u.useState)(!1),[f,g]=(0,u.useState)(!1),{activeMenu:j}=(0,v.v9)((e=>e.menu),v.wU),{defaultCurrency:Z}=(0,v.v9)((e=>e.currency),v.wU),w=(0,u.useCallback)((()=>{b(!0),m.Z.profileShow().then((e=>{t(e.data)})).finally((()=>{b(!1)}))}),[]);(0,u.useEffect)((()=>{null!==j&&void 0!==j&&j.refetch&&w(),y((0,h.A_)(j))}),[null===j||void 0===j?void 0:j.refetch]);const k=[{title:o("created.at"),dataIndex:"created_at",render:e=>c()(e).format("YYYY-MM-DD hh:mm")},{title:o("status"),dataIndex:"status",render:e=>(0,_.jsx)("div",{children:"paid"===e?(0,_.jsx)(a.Z,{color:"cyan",children:e}):(0,_.jsx)(a.Z,{color:"blue",children:e})})},{title:o("type"),dataIndex:"type",render:e=>"topup"===e?(0,_.jsx)(a.Z,{color:"cyan",children:e}):(0,_.jsx)(a.Z,{color:"error",children:e})},{title:o("note"),dataIndex:"note"}];return(0,_.jsxs)(n.Z,{title:o("user.wallet"),extra:x?null:(0,_.jsx)(i.Z,{onClick:()=>g(!0),children:o("top.up")}),children:[null!==l&&void 0!==l&&l.wallet?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(d.Z.Title,{children:(0,r.Z)(null===l||void 0===l?void 0:l.wallet.price,null===Z||void 0===Z?void 0:Z.symbol,null===Z||void 0===Z?void 0:Z.position)}),(0,_.jsx)(s.Z,{loading:x,dataSource:null===l||void 0===l||null===(e=l.wallet)||void 0===e?void 0:e.histories,columns:k})]}):(0,_.jsx)(s.Z,{dataSource:[],columns:k,loading:x}),(0,_.jsx)(z,{refetch:w,open:f,handleCancel:()=>g(!1)})]})}}}]);
//# sourceMappingURL=7873.1d0fa1ea.chunk.js.map