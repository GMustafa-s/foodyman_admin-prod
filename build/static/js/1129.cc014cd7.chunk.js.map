{"version":3,"file":"static/js/1129.cc014cd7.chunk.js","mappings":"kTAaA,MAoDA,EApDoBA,KAClB,MAAM,EAAEC,IAAMC,EAAAA,EAAAA,KACRC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,OACVC,GAAQC,EAAAA,EAAAA,WAET,WAAEC,IAAeC,EAAAA,EAAAA,KAAaC,GAAUA,EAAMC,MAAMC,EAAAA,KACpD,UAAEC,IAAcJ,EAAAA,EAAAA,KAAaC,GAAUA,EAAMI,UAAUF,EAAAA,KAEtDG,EAAOC,IAAYC,EAAAA,EAAAA,UAAS,OAEnCC,EAAAA,EAAAA,YAAU,IACD,KACL,MAAMC,EAAOb,EAAKc,gBAAe,GACjChB,GAASiB,EAAAA,EAAAA,IAAY,CAAEb,WAAAA,EAAYW,KAAAA,OAGpC,IA6BH,OACEG,EAAAA,EAAAA,KAACC,EAAAA,EAAI,CAACC,MAAOxB,EAAE,gBAAiByB,OAAOH,EAAAA,EAAAA,KAACI,EAAAA,EAAY,IAAIC,UACtDL,EAAAA,EAAAA,KAACM,EAAAA,EAAgB,CAACtB,KAAMA,EAAMuB,aA7BbA,CAACC,EAAQC,KAAW,IAADC,EAAAC,EAAAC,EACtC,MAAMC,EAAO,CACXX,OAAOY,EAAAA,EAAAA,GAAqBvB,EAAWiB,GACvCO,aAAaD,EAAAA,EAAAA,GAAqBvB,EAAWiB,EAAQ,eACrDQ,KAAsB,QAAhBN,EAAAF,EAAOS,iBAAS,IAAAP,GAAhBA,EAAkBQ,MAAQ,WAAa,OAC7CC,OAAQC,OAAa,OAANZ,QAAM,IAANA,OAAM,EAANA,EAAQW,QACvBE,SAAgB,OAANb,QAAM,IAANA,GAAgB,QAAVG,EAANH,EAAQa,gBAAQ,IAAAV,OAAV,EAANA,EAAkBW,KAAK,KACjCL,UAAiB,OAANT,QAAM,IAANA,GAAiB,QAAXI,EAANJ,EAAQS,iBAAS,IAAAL,OAAX,EAANA,EAAmBM,MAC9BK,OAAa,OAALd,QAAK,IAALA,OAAK,EAALA,EAAOe,KAAKf,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOgB,OACrCC,MAAa,OAANlB,QAAM,IAANA,OAAM,EAANA,EAAQkB,OAGXC,EAAU,0BAEhB,OAAOC,EAAAA,EAAAA,OACGf,GACPgB,MAAK,KACJC,EAAAA,GAAAA,QAAcpD,EAAE,0BAChBqD,EAAAA,EAAAA,KAAM,KACJjD,GAASkD,EAAAA,EAAAA,IAAe,IAAK9C,EAAYyC,QAAAA,KACzC7C,GAASmD,EAAAA,EAAAA,GAAoB,QAE/BrD,EAAS,IAAI+C,QAEdO,OAAOC,GAAQzC,EAASyC,EAAIC,SAASvC,KAAKwC,WAKe5C,MAAOA","sources":["views/shop-categories/category-add.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Card, Form } from 'antd';\nimport { toast } from 'react-toastify';\nimport { useNavigate } from 'react-router-dom';\nimport LanguageList from 'components/language-list';\nimport { batch, shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { removeFromMenu, setMenuData } from 'redux/slices/menu';\nimport categoryService from 'services/category';\nimport { fetchShopCategories } from 'redux/slices/shopCategory';\nimport { useTranslation } from 'react-i18next';\nimport getTranslationFields from 'helpers/getTranslationFields';\nimport ShopCategoryForm from './category-form';\n\nconst CategoryAdd = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const { languages } = useSelector((state) => state.formLang, shallowEqual);\n\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    return () => {\n      const data = form.getFieldsValue(true);\n      dispatch(setMenuData({ activeMenu, data }));\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleSubmit = (values, image) => {\n    const body = {\n      title: getTranslationFields(languages, values),\n      description: getTranslationFields(languages, values, 'description'),\n      type: values.parent_id?.value ? 'sub_shop' : 'shop',\n      active: Number(values?.active),\n      keywords: values?.keywords?.join(','),\n      parent_id: values?.parent_id?.value,\n      images: image?.map((image) => image?.name),\n      input: values?.input,\n    };\n\n    const nextUrl = 'catalog/shop/categories';\n\n    return categoryService\n      .create(body)\n      .then(() => {\n        toast.success(t('successfully.created'));\n        batch(() => {\n          dispatch(removeFromMenu({ ...activeMenu, nextUrl }));\n          dispatch(fetchShopCategories({}));\n        });\n        navigate(`/${nextUrl}`);\n      })\n      .catch((err) => setError(err.response.data.params));\n  };\n\n  return (\n    <Card title={t('add.category')} extra={<LanguageList />}>\n      <ShopCategoryForm form={form} handleSubmit={handleSubmit} error={error} />\n    </Card>\n  );\n};\nexport default CategoryAdd;\n"],"names":["CategoryAdd","t","useTranslation","navigate","useNavigate","dispatch","useDispatch","form","Form","activeMenu","useSelector","state","menu","shallowEqual","languages","formLang","error","setError","useState","useEffect","data","getFieldsValue","setMenuData","_jsx","Card","title","extra","LanguageList","children","ShopCategoryForm","handleSubmit","values","image","_values$parent_id","_values$keywords","_values$parent_id2","body","getTranslationFields","description","type","parent_id","value","active","Number","keywords","join","images","map","name","input","nextUrl","categoryService","then","toast","batch","removeFromMenu","fetchShopCategories","catch","err","response","params"],"sourceRoot":""}