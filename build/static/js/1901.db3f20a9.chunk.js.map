{"version":3,"file":"static/js/1901.db3f20a9.chunk.js","mappings":"oTAaA,MAsDA,EAtD0BA,KACxB,MAAM,EAAEC,IAAMC,EAAAA,EAAAA,KACRC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,OACX,WAAEC,IAAeC,EAAAA,EAAAA,KAAaC,GAAUA,EAAMC,MAAMC,EAAAA,KACnDC,GAAQC,EAAAA,EAAAA,WACRC,EAAOC,IAAYC,EAAAA,EAAAA,UAAS,OAE7B,UAAEC,IAAcT,EAAAA,EAAAA,KAAaC,GAAUA,EAAMS,UAAUP,EAAAA,KAE7DQ,EAAAA,EAAAA,YAAU,IACD,KACL,MAAMC,EAAOR,EAAKS,gBAAe,GACjChB,GAASiB,EAAAA,EAAAA,IAAY,CAAEf,WAAAA,EAAYa,KAAAA,OAGpC,IA4BH,OACEG,EAAAA,EAAAA,KAACC,EAAAA,EAAI,CAACC,MAAOxB,EAAE,gBAAiByB,OAAOH,EAAAA,EAAAA,KAACI,EAAAA,EAAY,IAAIC,UACtDL,EAAAA,EAAAA,KAACM,EAAAA,EAAkB,CACjBjB,KAAMA,EACNkB,aA9BeA,CAACC,EAAQC,KAAW,IAADC,EAAAC,EACtC,MAAMC,EAAO,CACXC,KAAM,UACNX,OAAOY,EAAAA,EAAAA,GAAqBpB,EAAWc,GACvCO,aAAaD,EAAAA,EAAAA,GAAqBpB,EAAWc,EAAQ,eACrDQ,SAAgB,OAANR,QAAM,IAANA,GAAgB,QAAVE,EAANF,EAAQQ,gBAAQ,IAAAN,OAAV,EAANA,EAAkBO,KAAK,KACjCC,MAAoB,QAAfP,EAAQ,OAANH,QAAM,IAANA,OAAM,EAANA,EAAQU,aAAK,IAAAP,EAAAA,EAAI,EACxBQ,OAAa,OAALV,QAAK,IAALA,OAAK,EAALA,EAAOW,KAAKC,GAAa,OAAJA,QAAI,IAAJA,OAAI,EAAJA,EAAMC,OACnCC,OAAc,OAANf,QAAM,IAANA,GAAAA,EAAQe,OAAS,EAAI,EAC7BC,eAAWC,GAEPC,EAAU,4BAEhB,OAAOC,EAAAA,EAAAA,OACGf,GACPgB,MAAK,KACJC,EAAAA,GAAAA,QAAcnD,EAAE,0BAChBoD,EAAAA,EAAAA,KAAM,KACJhD,GAASiD,EAAAA,EAAAA,IAAsB,KAC/BjD,GAASkD,EAAAA,EAAAA,IAAe,IAAKhD,EAAY0C,QAAAA,QAE3C9C,EAAS,IAAI8C,QAEdO,OAAOC,IAAG,IAAAC,EAAAC,EAAA,OAAK5C,EAAY,OAAH0C,QAAG,IAAHA,GAAa,QAAVC,EAAHD,EAAKG,gBAAQ,IAAAF,GAAM,QAANC,EAAbD,EAAetC,YAAI,IAAAuC,OAAhB,EAAHA,EAAqBE,YAQ5C/C,MAAOA","sources":["views/recipe-categories/category-add.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Card, Form } from 'antd';\nimport { toast } from 'react-toastify';\nimport { useNavigate } from 'react-router-dom';\nimport LanguageList from 'components/language-list';\nimport { batch, shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { removeFromMenu, setMenuData } from 'redux/slices/menu';\nimport categoryService from 'services/category';\nimport { useTranslation } from 'react-i18next';\nimport { fetchRecipeCategories } from 'redux/slices/recipe-category';\nimport getTranslationFields from 'helpers/getTranslationFields';\nimport RecipeCategoryForm from './category-form';\n\nconst RecipeCategoryAdd = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const [form] = Form.useForm();\n  const [error, setError] = useState(null);\n\n  const { languages } = useSelector((state) => state.formLang, shallowEqual);\n\n  useEffect(() => {\n    return () => {\n      const data = form.getFieldsValue(true);\n      dispatch(setMenuData({ activeMenu, data }));\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleSubmit = (values, image) => {\n    const body = {\n      type: 'receipt',\n      title: getTranslationFields(languages, values),\n      description: getTranslationFields(languages, values, 'description'),\n      keywords: values?.keywords?.join(','),\n      input: values?.input ?? 0,\n      images: image?.map((item) => item?.name),\n      active: values?.active ? 1 : 0,\n      parent_id: undefined,\n    };\n    const nextUrl = 'catalog/recipe-categories';\n\n    return categoryService\n      .create(body)\n      .then(() => {\n        toast.success(t('successfully.created'));\n        batch(() => {\n          dispatch(fetchRecipeCategories({}));\n          dispatch(removeFromMenu({ ...activeMenu, nextUrl }));\n        });\n        navigate(`/${nextUrl}`);\n      })\n      .catch((err) => setError(err?.response?.data?.params));\n  };\n\n  return (\n    <Card title={t('add.category')} extra={<LanguageList />}>\n      <RecipeCategoryForm\n        form={form}\n        handleSubmit={handleSubmit}\n        error={error}\n      />\n    </Card>\n  );\n};\nexport default RecipeCategoryAdd;\n"],"names":["RecipeCategoryAdd","t","useTranslation","navigate","useNavigate","dispatch","useDispatch","activeMenu","useSelector","state","menu","shallowEqual","form","Form","error","setError","useState","languages","formLang","useEffect","data","getFieldsValue","setMenuData","_jsx","Card","title","extra","LanguageList","children","RecipeCategoryForm","handleSubmit","values","image","_values$keywords","_values$input","body","type","getTranslationFields","description","keywords","join","input","images","map","item","name","active","parent_id","undefined","nextUrl","categoryService","then","toast","batch","fetchRecipeCategories","removeFromMenu","catch","err","_err$response","_err$response$data","response","params"],"sourceRoot":""}