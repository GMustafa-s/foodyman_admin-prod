{"version":3,"file":"static/js/8068.fa2ab2bf.chunk.js","mappings":"yUAcA,MAuDA,EAvDgBA,KACd,MAAM,EAAEC,IAAMC,EAAAA,EAAAA,MACR,WAAEC,IAAeC,EAAAA,EAAAA,KAAaC,GAAUA,EAAMC,MAAMC,EAAAA,IACpDC,GAAWC,EAAAA,EAAAA,OACVC,GAAQC,EAAAA,EAAAA,UACTC,GAAWC,EAAAA,EAAAA,OACX,UAAEC,IAAcV,EAAAA,EAAAA,KAAaC,GAAUA,EAAMU,UAAUR,EAAAA,KAE7DS,EAAAA,EAAAA,YAAU,IACD,KACL,MAAMC,EAAOP,EAAKQ,gBAAe,GACjCV,GAASW,EAAAA,EAAAA,IAAY,CAAEhB,WAAAA,EAAYc,KAAAA,OAGpC,IAkCH,OACEG,EAAAA,EAAAA,KAACC,EAAAA,EAAI,CAACC,MAAOrB,EAAE,aAAcsB,UAAU,QAAQC,OAAOJ,EAAAA,EAAAA,KAACK,EAAAA,EAAY,IAAIC,UACrEN,EAAAA,EAAAA,KAACO,EAAAA,EAAQ,CAACjB,KAAMA,EAAMkB,aAlCLA,CAACC,EAAQC,KAC5B,MAAMC,EAAO,CACXC,OAAQF,EAAMG,KAAKC,GAAQA,EAAIC,OAC/BC,OAAQC,OAAOR,EAAOO,QACtBE,KAAMT,EAAOS,KACbhB,OAAOiB,EAAAA,EAAAA,GAAqBzB,EAAWe,EAAQ,SAC/CW,aAAaD,EAAAA,EAAAA,GAAqBzB,EAAWe,EAAQ,eACrDY,QAAS,CACPC,wBAA+B,OAANb,QAAM,IAANA,OAAM,EAANA,EAAQa,wBACjCC,sBAA6B,OAANd,QAAM,IAANA,OAAM,EAANA,EAAQc,wBAG7BC,EAAU,QAEhB,OAAOC,GAAAA,CAAM,CACXC,OAAQ,OACRC,IAAK,GAAGC,EAAAA,0BACRC,QAAS,CAAEC,cAAe,UAAUC,aAAaC,QAAQ,YACzDnC,KAAMc,EACNsB,OAAQ,KAEPC,MAAK,KACJC,EAAAA,GAAAA,QAActD,EAAE,0BAChBuD,EAAAA,EAAAA,KAAM,KACJhD,GAASiD,EAAAA,EAAAA,IAAe,IAAKtD,EAAYyC,QAAAA,KACzCpC,GAASkD,EAAAA,EAAAA,GAAW,QAEtB9C,EAAS,aAEV+C,OAAOC,IAAG,IAAAC,EAAAC,EAAA,OAAKP,EAAAA,GAAAA,MAAwB,QAAbM,EAACD,EAAIG,gBAAQ,IAAAF,GAAM,QAANC,EAAZD,EAAc5C,YAAI,IAAA6C,OAAN,EAAZA,EAAoBE","sources":["views/pages/page-add.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { Card, Form } from 'antd';\nimport { batch, shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { removeFromMenu, setMenuData } from 'redux/slices/menu';\nimport { fetchPages } from 'redux/slices/pages';\nimport { useTranslation } from 'react-i18next';\nimport LanguageList from 'components/language-list';\nimport { api_url } from 'configs/app-global';\nimport axios from 'axios';\nimport getTranslationFields from 'helpers/getTranslationFields';\nimport PageForm from './page-form';\n\nconst PageAdd = () => {\n  const { t } = useTranslation();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n  const navigate = useNavigate();\n  const { languages } = useSelector((state) => state.formLang, shallowEqual);\n\n  useEffect(() => {\n    return () => {\n      const data = form.getFieldsValue(true);\n      dispatch(setMenuData({ activeMenu, data }));\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleSubmit = (values, image) => {\n    const body = {\n      images: image.map((img) => img.name),\n      active: Number(values.active),\n      type: values.type,\n      title: getTranslationFields(languages, values, 'title'),\n      description: getTranslationFields(languages, values, 'description'),\n      buttons: {\n        google_play_button_link: values?.google_play_button_link,\n        app_store_button_link: values?.app_store_button_link,\n      },\n    };\n    const nextUrl = 'pages';\n\n    return axios({\n      method: 'post',\n      url: `${api_url}dashboard/admin/pages`,\n      headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\n      data: body,\n      params: {},\n    })\n      .then(() => {\n        toast.success(t('successfully.created'));\n        batch(() => {\n          dispatch(removeFromMenu({ ...activeMenu, nextUrl }));\n          dispatch(fetchPages({}));\n        });\n        navigate(`/${nextUrl}`);\n      })\n      .catch((err) => toast.error(err.response?.data?.message));\n  };\n\n  return (\n    <Card title={t('add.pages')} className='h-100' extra={<LanguageList />}>\n      <PageForm form={form} handleSubmit={handleSubmit} />\n    </Card>\n  );\n};\n\nexport default PageAdd;\n"],"names":["PageAdd","t","useTranslation","activeMenu","useSelector","state","menu","shallowEqual","dispatch","useDispatch","form","Form","navigate","useNavigate","languages","formLang","useEffect","data","getFieldsValue","setMenuData","_jsx","Card","title","className","extra","LanguageList","children","PageForm","handleSubmit","values","image","body","images","map","img","name","active","Number","type","getTranslationFields","description","buttons","google_play_button_link","app_store_button_link","nextUrl","axios","method","url","api_url","headers","Authorization","localStorage","getItem","params","then","toast","batch","removeFromMenu","fetchPages","catch","err","_err$response","_err$response$data","response","message"],"sourceRoot":""}