"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[299],{30299:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var l=a(72791),n=a(16871),i=a(30577),s=a(77483),o=a(54080),r=a(37083),d=a(79337),u=a(48030),c=a(39489),v=a(14738),p=a(33168),g=a(87320),m=a(85830),h=a(74569),f=a.n(h),b=a(12098),_=a(16209),k=a(80184);const y=()=>{const{t:e}=(0,p.$)(),{activeMenu:t}=(0,d.v9)((e=>e.menu),d.wU),a=(0,d.I0)(),[h]=s.Z.useForm(),y=(0,n.s0)(),{id:Z}=(0,n.UO)(),[x,j]=(0,l.useState)(!1),{languages:$}=(0,d.v9)((e=>e.formLang),d.wU);function w(e){if(!e)return{};const{translations:t}=e,a=$.map((e=>{var a,l;return{[`title[${e.locale}]`]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.title,[`description[${e.locale}]`]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.description}}));return Object.assign({},...a)}(0,l.useEffect)((()=>()=>{const e=h.getFieldsValue(!0);a((0,u.nc)({activeMenu:t,data:e}))}),[]);return(0,l.useEffect)((()=>{var e;t.refetch&&(e=Z,j(!0),v.Z.getById(e).then((e=>{var l;let n=e.data;const i={...n,...w(n),...null===n||void 0===n?void 0:n.buttons,active:!(null===n||void 0===n||!n.active),image:[(s=null===n||void 0===n||null===(l=n.galleries[0])||void 0===l?void 0:l.path,{name:s,url:m.bV+s})]};var s;h.setFieldsValue(i),a((0,u.nc)({activeMenu:t,data:i}))})).finally((()=>{a((0,u.A_)(t)),j(!1)})))}),[t.refetch]),(0,k.jsx)(o.Z,{title:e("edit.page"),className:"h-100",extra:(0,k.jsx)(g.Z,{}),children:x?(0,k.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,k.jsx)(r.Z,{size:"large",className:"py-5"})}):(0,k.jsx)(_.Z,{form:h,handleSubmit:(l,n)=>{const s={images:n.map((e=>e.name)),active:Number(l.active),type:l.type,title:(0,b.Z)($,l,"title"),description:(0,b.Z)($,l,"description"),buttons:{google_play_button_link:null===l||void 0===l?void 0:l.google_play_button_link,app_store_button_link:null===l||void 0===l?void 0:l.app_store_button_link}},o="pages";return f()({method:"put",url:`${m.YZ}dashboard/admin/pages/${Z}`,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},data:s,params:{}}).then((()=>{i.Am.success(e("successfully.updated")),(0,d.dC)((()=>{a((0,u.ph)({...t,nextUrl:o})),a((0,c.R)({}))})),y("/pages")})).catch((e=>{var t,a;return i.Am.error(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)}))}})})}}}]);
//# sourceMappingURL=299.1534dfd4.chunk.js.map