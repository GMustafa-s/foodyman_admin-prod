{"version":3,"file":"static/js/2263.9f19f265.chunk.js","mappings":"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","sources":["helpers/useQueryParams.js","views/addons/addons-edit.js"],"sourcesContent":["import { useNavigate, useLocation } from 'react-router-dom';\nimport qs from 'qs';\n\nexport const useQueryParams = () => {\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const queryParams = qs.parse(location.search, { ignoreQueryPrefix: true });\n\n  const get = (name) => queryParams[name];\n  const set = (name, value) =>\n    navigate({ search: qs.stringify({ ...queryParams, [name]: value }) });\n  const clear = () => navigate({ search: qs.stringify({}) });\n  const merge = (values) =>\n    navigate({ search: qs.stringify({ ...queryParams, ...values }) });\n  const reset = (name) => {\n    const newParams = { ...queryParams };\n    if (newParams[name]) {\n      delete newParams[name];\n    }\n\n    navigate({ search: qs.stringify({ ...newParams }) });\n  };\n\n  const setMultiple = (params) => {\n    const newParams = { ...queryParams, ...params };\n    navigate({ search: qs.stringify(newParams) });\n  };\n\n  const resetMultiple = (params) => {\n    const newParams = { ...queryParams };\n    params.forEach((param) => {\n      if (newParams[param]) {\n        delete newParams[param];\n      }\n    });\n    navigate({ search: qs.stringify(newParams) });\n  };\n\n  return {\n    values: queryParams,\n    set,\n    reset,\n    clear,\n    merge,\n    get,\n    setMultiple,\n    resetMultiple,\n  };\n};\n","import { useEffect, useState } from 'react';\nimport { Card, Spin, Steps } from 'antd';\nimport LanguageList from 'components/language-list';\nimport { useParams } from 'react-router-dom';\nimport productService from 'services/product';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { disableRefetch, setMenuData } from 'redux/slices/menu';\nimport { useTranslation } from 'react-i18next';\nimport { useQueryParams } from 'helpers/useQueryParams';\nimport { steps } from './steps';\nimport AddonFinish from './addons-finish';\nimport AddonStock from './addons-stock';\nimport AddonIndex from './addons-index';\n\nconst { Step } = Steps;\n\nconst AddonEdit = () => {\n  const { t } = useTranslation();\n  const { uuid } = useParams();\n  const queryParams = useQueryParams();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const { languages } = useSelector((state) => state.formLang, shallowEqual);\n  const dispatch = useDispatch();\n\n  const current = Number(queryParams.values?.step || 0);\n  const [loading, setLoading] = useState(activeMenu.refetch);\n\n  const next = () => {\n    const step = current + 1;\n    queryParams.set('step', step);\n  };\n  const prev = () => {\n    const step = current - 1;\n    queryParams.set('step', step);\n  };\n\n  const createImages = (items) =>\n    items.map((item) => ({\n      uid: item.id,\n      name: item.path,\n      url: item.path,\n    }));\n\n  const createSelectObject = (item) => {\n    if (!item) return null;\n    return {\n      label: item.translation ? item.translation.title : item.title,\n      value: item.id,\n    };\n  };\n\n  function fetchProduct(uuid) {\n    setLoading(true);\n    productService\n      .getById(uuid)\n      .then((res) => {\n        const data = {\n          ...res.data,\n          ...getLanguageFields(res?.data),\n          shop: createSelectObject(res?.data?.shop),\n          category: createSelectObject(res?.data?.category),\n          brand: createSelectObject(res?.data?.brand),\n          unit: createSelectObject(res?.data?.unit),\n          images: createImages(res?.data?.galleries),\n          extras: res?.data?.stocks?.[0]?.extras?.map(\n            (el) => el?.extra_group_id,\n          ),\n          stocks: res?.data?.stocks?.map((stock) => ({\n            ...stock,\n            ...Object.assign(\n              {},\n              ...stock?.extras?.map((extra, idx) => ({\n                [`extras[${idx}]`]: extra?.id,\n              })),\n            ),\n            quantity: stock?.quantity ?? 0,\n            extras: undefined,\n          })),\n          properties: res?.data?.properties?.map((item, index) => ({\n            id: index,\n            [`key[${item?.locale}]`]: item?.key,\n            [`value[${item?.locale}]`]: item?.value,\n          })),\n          translation: undefined,\n          translations: undefined,\n          interval: res?.data?.interval ?? 1,\n          tax: res?.data?.tax ?? 0,\n        };\n        dispatch(setMenuData({ activeMenu, data }));\n      })\n      .finally(() => {\n        setLoading(false);\n        dispatch(disableRefetch(activeMenu));\n      });\n  }\n\n  function getLanguageFields(data) {\n    if (!data?.translations) {\n      return {};\n    }\n    const { translations } = data;\n    const result = languages.map((item) => ({\n      [`title[${item.locale}]`]: translations.find(\n        (el) => el.locale === item.locale,\n      )?.title,\n      [`description[${item.locale}]`]: translations.find(\n        (el) => el.locale === item.locale,\n      )?.description,\n    }));\n    return Object.assign({}, ...result);\n  }\n\n  useEffect(() => {\n    if (activeMenu.refetch) {\n      fetchProduct(uuid);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [activeMenu.refetch]);\n\n  const onChange = (step) => {\n    dispatch(setMenuData({ activeMenu, data: { ...activeMenu.data, step } }));\n    queryParams.set('step', step);\n  };\n\n  return (\n    <Card title={t('addon.edit')} extra={<LanguageList />}>\n      <Steps current={current} onChange={onChange}>\n        {steps.map((item) => (\n          <Step title={t(item.title)} key={item.title} />\n        ))}\n      </Steps>\n      {!loading ? (\n        <div className='steps-content'>\n          {steps[current].content === 'First-content' && (\n            <AddonIndex next={next} action_type={'edit'} />\n          )}\n\n          {steps[current].content === 'Third-content' && (\n            <AddonStock next={next} prev={prev} current={current} />\n          )}\n\n          {steps[current].content === 'Finish-content' && (\n            <AddonFinish prev={prev} />\n          )}\n        </div>\n      ) : (\n        <div className='d-flex justify-content-center align-items-center'>\n          <Spin size='large' className='py-5' />\n        </div>\n      )}\n    </Card>\n  );\n};\nexport default AddonEdit;\n"],"names":["useQueryParams","navigate","useNavigate","location","useLocation","queryParams","qs","search","ignoreQueryPrefix","values","set","name","value","reset","newParams","clear","merge","get","setMultiple","params","resetMultiple","forEach","param","Step","Steps","AddonEdit","_queryParams$values","t","useTranslation","uuid","useParams","activeMenu","useSelector","state","menu","shallowEqual","languages","formLang","dispatch","useDispatch","current","Number","step","loading","setLoading","useState","refetch","next","prev","createSelectObject","item","label","translation","title","id","getLanguageFields","data","translations","result","map","_translations$find","_translations$find2","locale","find","el","description","Object","assign","useEffect","productService","then","res","_res$data","_res$data2","_res$data3","_res$data4","_res$data5","_res$data6","_res$data6$stocks","_res$data6$stocks$","_res$data6$stocks$$ex","_res$data7","_res$data7$stocks","_res$data8","_res$data8$properties","_res$data$interval","_res$data9","_res$data$tax","_res$data10","shop","category","brand","unit","images","items","galleries","uid","path","url","extras","stocks","extra_group_id","stock","_stock$extras","_stock$quantity","extra","idx","quantity","undefined","properties","index","key","interval","tax","setMenuData","finally","disableRefetch","fetchProduct","_jsxs","Card","_jsx","LanguageList","children","onChange","steps","className","Spin","size","content","AddonIndex","action_type","AddonStock","AddonFinish"],"sourceRoot":""}